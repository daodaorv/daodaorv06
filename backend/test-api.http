### 叨叨房车 API 测试文件
### 使用 VS Code 的 REST Client 扩展运行

@baseUrl = http://localhost:3000
@token = 

### 1. 健康检查
GET {{baseUrl}}/health

### 2. 测试接口
GET {{baseUrl}}/api/v1/test

### 3. 发送注册验证码
POST {{baseUrl}}/api/v1/auth/send-code
Content-Type: application/json

{
  "phone": "13900139001",
  "code_type": "register"
}

### 4. 用户注册（需要先获取验证码）
POST {{baseUrl}}/api/v1/auth/register
Content-Type: application/json

{
  "phone": "13900139001",
  "password": "123456",
  "verification_code": "替换为实际验证码",
  "username": "test_user_001"
}

### 5. 管理员登录
# @name adminLogin
POST {{baseUrl}}/api/v1/auth/login
Content-Type: application/json

{
  "phone": "13800138000",
  "password": "123456",
  "platform": "pc"
}

### 6. 普通用户登录
# @name userLogin
POST {{baseUrl}}/api/v1/auth/login
Content-Type: application/json

{
  "phone": "13900139000",
  "password": "123456",
  "platform": "miniprogram"
}

### 7. 发送登录验证码
POST {{baseUrl}}/api/v1/auth/send-code
Content-Type: application/json

{
  "phone": "13900139000",
  "code_type": "login"
}

### 8. 验证码登录
POST {{baseUrl}}/api/v1/auth/login-with-code
Content-Type: application/json

{
  "phone": "13900139000",
  "verification_code": "替换为实际验证码",
  "platform": "miniprogram"
}

### 9. 获取用户信息（需要先登录获取token）
GET {{baseUrl}}/api/v1/users/profile
Authorization: Bearer {{token}}

### 10. 更新用户信息
PUT {{baseUrl}}/api/v1/users/profile
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "real_name": "张三",
  "email": "zhangsan@example.com",
  "gender": "male",
  "birthday": "1990-01-01",
  "address": "北京市朝阳区"
}

### 11. 获取登录日志
GET {{baseUrl}}/api/v1/users/login-logs?limit=10
Authorization: Bearer {{token}}

### 12. 获取所有用户（管理员权限）
GET {{baseUrl}}/api/v1/users?page=1&pageSize=20
Authorization: Bearer {{token}}

### 13. 搜索用户（管理员权限）
GET {{baseUrl}}/api/v1/users?search=139&page=1&pageSize=20
Authorization: Bearer {{token}}

### 14. 筛选用户状态（管理员权限）
GET {{baseUrl}}/api/v1/users?status=active&page=1&pageSize=20
Authorization: Bearer {{token}}

### 15. 更新用户状态（管理员权限）
PUT {{baseUrl}}/api/v1/users/2/status
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "status": "inactive"
}

### 16. 测试参数验证 - 错误的手机号
POST {{baseUrl}}/api/v1/auth/send-code
Content-Type: application/json

{
  "phone": "123",
  "code_type": "register"
}

### 17. 测试参数验证 - 密码太短
POST {{baseUrl}}/api/v1/auth/register
Content-Type: application/json

{
  "phone": "13900139002",
  "password": "123",
  "verification_code": "123456"
}

### 18. 测试未授权访问
GET {{baseUrl}}/api/v1/users/profile

### 19. 测试过期/无效Token
GET {{baseUrl}}/api/v1/users/profile
Authorization: Bearer invalid_token_here


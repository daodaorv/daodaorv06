# 叨叨房车小程序基础组件文档

**文档版本**: v1.0.0 | **创建时间**: 2025-11-24 | **维护团队**: 叨叨房车技术团队

> 💡 **重要提醒**: 优先使用uni-app内置组件和uni-ui组件库，只有在这些组件无法满足需求时才使用自定义基础组件。

---

## 📋 基础组件概览

叨叨房车小程序共有 **3个** 自定义基础组件，主要作为uni-app内置组件和uni-ui组件库的补充，提供通用性的UI功能。

| 组件名称 | 用途 | 依赖 | 复杂度 | 状态 |
|----------|------|------|--------|------|
| **NoticeBanner** | 公告横幅滚动显示 | uni-app内置 | 低 | ✅ 稳定 |
| **ServiceGrid** | 功能入口网格展示 | uni-icons | 低 | ✅ 稳定 |
| **WaterfallItem** | 瀑布流内容展示 | uni-app内置 | 中 | ✅ 稳定 |

---

## 🎯 uni-app内置组件优先使用指南

### 常用内置组件推荐

#### 布局组件
```vue
<!-- ✅ 推荐：使用view作为容器 -->
<view class="container">
  <view class="header">头部</view>
  <view class="content">内容</view>
  <view class="footer">底部</view>
</view>

<!-- ✅ 推荐：使用scroll-view实现滚动 -->
<scroll-view scroll-y class="scroll-container" :style="{ height: '500rpx' }">
  <view v-for="item in list" :key="item.id" class="scroll-item">
    {{ item.content }}
  </view>
</scroll-view>
```

#### 媒体组件
```vue
<!-- ✅ 推荐：图片组件设置mode和懒加载 -->
<image
  :src="imageSrc"
  mode="aspectFill"
  lazy-load
  @error="handleImageError"
  class="cover-image"
/>

<!-- ✅ 推荐：轮播图组件 -->
<swiper
  indicator-dots
  autoplay
  interval="3000"
  duration="500"
  class="banner-swiper"
>
  <swiper-item v-for="(banner, index) in banners" :key="index">
    <image :src="banner.image" mode="aspectFill" />
  </swiper-item>
</swiper>
```

#### 表单组件
```vue
<!-- ✅ 推荐：输入框组件 -->
<input
  type="text"
  v-model="inputValue"
  placeholder="请输入内容"
  :maxlength="50"
  @input="handleInput"
  class="form-input"
/>

<!-- ✅ 推荐：按钮组件 -->
<button
  type="primary"
  :loading="submitting"
  :disabled="!canSubmit"
  @click="handleSubmit"
  class="submit-btn"
>
  {{ submitting ? '提交中...' : '立即提交' }}
</button>
```

---

## 🎨 uni-ui组件库使用指南

### 常用uni-ui组件

#### 卡片和列表
```vue
<!-- ✅ 推荐：使用uni-card替代自定义卡片 -->
<uni-card
  :title="cardTitle"
  :extra="extraText"
  :is-shadow="true"
  @click="handleCardClick"
>
  <view class="card-content">
    卡片内容
  </view>
  <template v-slot:actions>
    <button size="mini" type="primary">操作按钮</button>
  </template>
</uni-card>

<!-- ✅ 推荐：使用uni-list替代自定义列表 -->
<uni-list>
  <uni-list-item
    v-for="item in list"
    :key="item.id"
    :title="item.title"
    :note="item.description"
    :thumb="item.avatar"
    :show-arrow="true"
    clickable
    @click="handleItemClick(item)"
  />
</uni-list>
```

#### 反馈组件
```vue
<!-- ✅ 推荐：使用uni-popup替代自定义弹窗 -->
<uni-popup ref="popupRef" type="center" :mask-click="false">
  <view class="popup-content">
    <view class="popup-title">确认操作</view>
    <view class="popup-body">确定要执行此操作吗？</view>
    <view class="popup-actions">
      <button @click="closePopup">取消</button>
      <button type="primary" @click="confirmAction">确认</button>
    </view>
  </view>
</uni-popup>

<!-- ✅ 推荐：使用uni-badge显示徽章 -->
<uni-badge
  :text="badgeCount"
  :type="badgeType"
  :size="badgeSize"
  :is-dot="isDot"
  class="notification-badge"
>
  <uni-icons type="notification" size="24" />
</uni-badge>
```

---

## 📦 自定义基础组件详解

### 1. NoticeBanner - 公告横幅

#### 组件说明
用于首页顶部公告信息的横向滚动展示，支持多条公告轮播切换。

#### Props
| 属性名 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| notices | Array | [] | 公告列表 |
| height | String/Number | 80 | 公告栏高度（rpx） |
| speed | Number | 40 | 滚动速度（px/s） |
| showIcon | Boolean | true | 是否显示喇叭图标 |
| iconColor | String | #FF9F29 | 图标颜色 |
| textColor | String | #666666 | 文字颜色 |

#### Events
| 事件名 | 参数 | 说明 |
|--------|------|------|
| notice-click | (notice: Object, index: Number) | 点击公告时触发 |

#### 使用示例
```vue
<template>
  <NoticeBanner
    :notices="noticeList"
    :height="80"
    :speed="40"
    @notice-click="handleNoticeClick"
  />
</template>

<script setup>
const noticeList = ref([
  {
    id: 1,
    title: '欢迎使用叨叨房车小程序',
    content: '新用户首次预订享受9折优惠',
    url: '/pages/activity/new-user'
  },
  {
    id: 2,
    title: '系统维护通知',
    content: '今晚23:00-24:00系统维护，期间服务可能受影响',
    url: '/pages/notice/maintenance'
  }
])

const handleNoticeClick = (notice, index) => {
  uni.navigateTo({
    url: notice.url
  })
}
</script>
```

#### 实现原理
基于uni-app的`<swiper>`组件实现，使用CSS动画实现横向滚动效果。

### 2. ServiceGrid - 服务网格

#### 组件说明
用于首页金刚区的功能入口展示，采用3x2网格布局，每个入口包含图标和文字。

#### Props
| 属性名 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| services | Array | [] | 服务列表 |
| columns | Number | 3 | 每行显示数量 |
| gap | String/Number | 20 | 网格间距（rpx） |
| iconSize | String/Number | 48 | 图标大小（rpx） |
| textClass | String | '' | 文字样式类名 |

#### Events
| 事件名 | 参数 | 说明 |
|--------|------|------|
| service-click | (service: Object, index: Number) | 点击服务时触发 |

#### 使用示例
```vue
<template>
  <ServiceGrid
    :services="serviceList"
    :columns="3"
    :gap="20"
    :icon-size="48"
    @service-click="handleServiceClick"
  />
</template>

<script setup>
const serviceList = ref([
  {
    id: 1,
    name: '特惠租车',
    icon: 'car',
    color: '#FF9F29',
    url: '/pages/special-offer/index'
  },
  {
    id: 2,
    name: '营地预定',
    icon: 'location',
    color: '#007AFF',
    url: '/pages/camping/index'
  },
  {
    id: 3,
    name: '房车旅游',
    icon: 'paperplane',
    color: '#4CD964',
    url: '/pages/travel/index'
  },
  {
    id: 4,
    name: '房车众筹',
    icon: 'heart',
    color: '#DD524D',
    url: '/pages/crowdfunding/index'
  },
  {
    id: 5,
    name: '优惠券',
    icon: 'gift',
    color: '#FF9F29',
    url: '/pages/coupon/list'
  },
  {
    id: 6,
    name: 'PLUS会员',
    icon: 'vip',
    color: '#FFD700',
    url: '/pages/vip/index'
  }
])

const handleServiceClick = (service, index) => {
  uni.navigateTo({
    url: service.url
  })
}
</script>
```

#### 实现原理
使用CSS Grid布局或Flex布局实现网格排列，图标使用uni-icons组件。

### 3. WaterfallItem - 瀑布流项目

#### 组件说明
用于社区内容的瀑布流展示，支持图片懒加载、自适应高度��用户交互等功能。

#### Props
| 属性名 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| item | Object | - | 内容项目数据 |
| width | String/Number | 345 | 项目宽度（rpx） |
| gap | String/Number | 10 | 项目间距（rpx） |
| showActions | Boolean | true | 是否显示操作按钮 |
| lazyLoad | Boolean | true | 是否懒加载图片 |

#### Events
| 事件名 | 参数 | 说明 |
|--------|------|------|
| item-click | (item: Object, index: Number) | 点击项目时触发 |
| like-click | (item: Object, isLiked: Boolean) | 点赞时触发 |
| share-click | (item: Object) | 分享时触发 |

#### 使用示例
```vue
<template>
  <view class="waterfall-container">
    <view
      v-for="(item, index) in waterfallData"
      :key="item.id"
      class="waterfall-item"
      :style="{ width: itemWidth + 'rpx' }"
    >
      <WaterfallItem
        :item="item"
        :width="345"
        :gap="10"
        :show-actions="true"
        @item-click="handleItemClick"
        @like-click="handleLikeClick"
        @share-click="handleShareClick"
      />
    </view>
  </view>
</template>

<script setup>
const waterfallData = ref([
  {
    id: 1,
    title: '房车旅行攻略：西北大环线',
    content: '分享一次完美的房车西北大环线旅行经历...',
    images: [
      'https://example.com/image1.jpg',
      'https://example.com/image2.jpg'
    ],
    author: {
      avatar: 'https://example.com/avatar.jpg',
      name: '旅行达人小明'
    },
    stats: {
      likes: 234,
      comments: 45,
      views: 1234
    },
    isLiked: false
  }
  // ... 更多数据
])

const itemWidth = ref(345)
const handleItemClick = (item, index) => {
  uni.navigateTo({
    url: `/pages/community/detail?id=${item.id}`
  })
}
</script>
```

#### 实现原理
使用CSS的`column-count`或JavaScript计算位置实现瀑布流布局，图片使用lazy-load优化性能。

---

## 🚨 组件使用禁忌

### ❌ 禁止开发的自定义组件

以下组件已由uni-ui提供，**严禁重复开发**：

| 组件类型 | uni-ui组件 | 自定义组件名 | 禁止原因 |
|----------|------------|--------------|----------|
| 卡片容器 | `uni-card` | `BaseCard` | 功能重复 |
| 按钮组件 | `uni-button` | `BaseButton` | 功能重复 |
| 标签组件 | `uni-tag` | `BaseTag` | 功能重复 |
| 徽章组件 | `uni-badge` | `BaseBadge` | 功能重复 |
| 分割线 | `uni-list-item` divider | `BaseDivider` | 功能重复 |
| 空状态 | `uni-empty` | `BaseEmpty` | 功能重复 |
| 加载中 | `uni-load-more` | `BaseLoading` | 功能重复 |
| 弹出层 | `uni-popup` | `BasePopup` | 功能重复 |

### ✅ 正确的组件选择流程

1. **第一步**：检查uni-app内置组件是否满足需求
2. **第二步**：检查uni-ui组件库是否有对应组件
3. **第三步**：以上都不满足时，才考虑开发自定义组件
4. **第四步**：开发前先进行技术调研和设计评审

---

## 🔧 性能优化建议

### 图片优化
```vue
<!-- ✅ 推荐：设置合适的mode和懒加载 -->
<image
  :src="item.image"
  mode="aspectFill"
  lazy-load
  @error="handleImageError"
  class="item-image"
/>
```

### 列表优化
```vue
<!-- ✅ 推荐：使用key避免重复渲染 -->
<view v-for="item in list" :key="item.id" class="list-item">
  {{ item.content }}
</view>

<!-- ✅ 推荐：长列表使用分页加载 -->
<uni-load-more
  :status="loadMoreStatus"
  :content-text="loadMoreText"
  @clickLoadMore="loadMore"
/>
```

### 计算优化
```vue
<script setup>
// ✅ 推荐：使用computed缓存计算结果
const filteredList = computed(() => {
  return list.value.filter(item => item.active)
})

// ✅ 推荐：避免在模板中直接计算
</script>
```

---

## 📖 相关文档

- **[组件总览](./组件总览.md)** - 组件体系概览
- **[业务组件文档](./业务组件文档.md)** - 业务组件详细说明
- **[组件使用示例](./组件使用示例.md)** - 实际使用场景
- **[组件开发规范](../03-开发指南/组件开发规范.md)** - 开发标准和规范
- **[uni-ui官方文档](https://hellouniapp.dcloud.net.cn/pages/extUI/badge/badge)** - uni-ui组件文档

---

**文档维护**: 叨叨房车技术团队
**最后更新**: 2025-11-24
**文档版本**: v1.0.0
**下次审核**: 2025-12-24
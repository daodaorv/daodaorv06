# 环境搭建指南

**文档版本**: v1.0.0 | **创建时间**: 2025-11-24 | **维护者**: 叨叨房车技术团队

> 🚀 **目标**: 30分钟内完成小程序开发环境搭建，开始第一个页面开发

---

## 📋 环境要求

### 系统要求
- **操作系统**: Windows 10+ / macOS 10.14+ / Linux
- **内存**: 8GB 以上（推荐 16GB）
- **硬盘**: 至少 20GB 可用空间

### 必需软件

#### 1. Node.js 环境
```bash
# 下载并安装 Node.js 18.18.0 LTS
# 访问: https://nodejs.org/

# 验证安装
node --version  # 应显示 v18.18.0
npm --version   # 应显示 9.x.x
```

#### 2. HBuilderX IDE
```bash
# 下载 HBuilderX 3.8+
# 访问: https://www.dcloud.io/hbuilderx.html

# 选择版本:
- App开发版 (推荐)
- 标准版
```

#### 3. 微信开发者工具
```bash
# 下载微信开发者工具
# 访问: https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

# 登录要求:
- 微信开发者账号
- 小程序 AppID (测试可用)
```

---

## 🔧 开发环境配置

### 1. HBuilderX 配置

#### 插件安装
```
打开 HBuilderX → 工具 → 插件安装

必装插件:
├── uni_modules (uni-app模块)
├── uni-ui (官方UI组件库)
├── TypeScript (TS支持)
├── SCSS/SASS (样式支持)
└── Git (版本控制)
```

#### 编译器配置
```json
// HBuilderX → 工具 → 设置 → 插件安装 → uni-app配置
{
  "compilerVersion": 3,
  "es6": true,
  "minify": true,
  "autoCompile": true,
  "checkType": true
}
```

### 2. 微信开发者工具配置

#### 基础设置
```
微信开发者工具 → 设置 → 项目设置

勾选选项:
✅ 不校验合法域名
✅ 不校验 TLS 版本
✅ 不校验业务域名
✅ 不校验 web-view (业务域名)
```

#### 调试设置
```
微信开发者工具 → 设置 → 调试器

设置项:
- Source Map: 开启
- 实时编译日志: 开启
- 启用 ES6 转 ES5: 开启
- 启用增强编译: 开启
```

---

## 📱 项目导入配置

### 1. 导入项目到 HBuilderX

```
步骤:
1. HBuilderX → 文件 → 打开目录
2. 选择 miniprogram/ 目录
3. 等待项目初始化完成
4. 右键项目 → 识别为 uni-app 项目
```

### 2. 配置微信小程序

#### AppID 配置
```json
// manifest.json 微信小程序配置
{
  "mp-weixin": {
    "appid": "你的小程序AppID",
    "setting": {
      "urlCheck": false,
      "es6": true,
      "enhance": true
    },
    "usingComponents": true
  }
}
```

#### 开发设置
```json
// manifest.json 基础配置
{
  "name": "叨叨房车",
  "versionName": "1.0.0",
  "description": "房车租赁小程序",
  "transformPx": false
}
```

---

## 🚀 快速验证环境

### 1. 运行到微信开发者工具

```
HBuilderX 操作步骤:
1. 右键项目 → 运行 → 运行到小程序模拟器
2. 选择微信开发者工具
3. 等待编译完成
4. 微信开发者工具自动打开项目
```

### 2. 验证核心功能

#### 检查项目结构
```
miniprogram/
├── pages/          ✅ 页面目录
├── components/     ✅ 组件目录
├── api/           ✅ 接口目录
├── stores/        ✅ 状态管理
├── utils/         ✅ 工具函数
├── static/        ✅ 静态资源
├── styles/        ✅ 样式文件
├── App.vue        ✅ 应用入口
├── main.ts        ✅ 主入口文件
├── manifest.json  ✅ 应用配置
└── pages.json     ✅ 页面配置
```

#### 验证页面显示
```
微信开发者工具中检查:
✅ 首页正常显示
✅ 底部导航栏显示
✅ 页面可以正常切换
✅ 控制台无错误信息
```

---

## ⚡ 开发效率配置

### 1. 代码片段配置

#### 自定义代码片段
```javascript
// HBuilderX → 工具 → 自定义代码片段

Vue 3 Composition API 模板:
{
  "Vue 3 Composition API": {
    "prefix": "vue3",
    "body": [
      "<script setup lang=\"ts\">",
      "import { ref, reactive, computed, onMounted } from 'vue'",
      "",
      "const props = defineProps({",
      "  // props 定义",
      "})",
      "",
      "const emit = defineEmits({",
      "  // emit 定义",
      "})",
      "",
      "// 响应式数据",
      "const state = reactive({",
      "  // state 定义",
      "})",
      "",
      "onMounted(() => {",
      "  // 生命周期",
      "})",
      "</script>",
      "",
      "<template>",
      "  <view class=\"container\">",
      "    <!-- 模板内容 -->",
      "  </view>",
      "</template>",
      "",
      "<style lang=\"scss\" scoped>",
      ".container {",
      "  padding: 30rpx;",
      "}",
      "</style>"
    ]
  }
}
```

### 2. 热重载配置

```json
// HBuilderX → 工具 → 设置
{
  "editor.autoSave": true,
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll": true
  },
  "emmet.includeLanguages": {
    "vue": "html"
  }
}
```

---

## 🔍 常见问题解决

### 问题1: 微信开发者工具无法打开项目
```bash
解决方案:
1. 检查微信开发者工具是否安装最新版本
2. 确认 AppID 配置正确
3. 重新配置 HBuilderX → 工具 → 设置 → 运行配置
4. 手动在微信开发者工具中导入项目
```

### 问题2: 编译报错 "无法识别 uni-app 项目"
```bash
解决方案:
1. 右键项目 → 重新识别项目类型
2. 检查 pages.json 是否存在且格式正确
3. 检查 manifest.json 是否存在且格式正确
4. 重启 HBuilderX
```

### 问题3: 样式不生效
```bash
解决方案:
1. 检查是否正确引入 styles/variables.scss
2. 确认使用 upx 单位而非 px
3. 检查 scoped 样式的作用域
4. 清理微信开发者工具缓存
```

### 问题4: TypeScript 类型错误
```bash
解决方案:
1. 检查 tsconfig.json 配置
2. 安装类型定义: npm install --save-dev @types/node
3. 重启 HBuilderX TypeScript 服务
4. 检查 Vue 3 + TypeScript 语法
```

---

## 📊 性能优化配置

### 1. 编译优化

```json
// manifest.json 优化配置
{
  "optimization": {
    "subPackages": true,
    "treeShaking": {
      "enable": true
    }
  }
}
```

### 2. 资源优化

```javascript
// 图片优化配置
{
  "static": {
    "optimization": true,
    "compression": true,
    "webp": true
  }
}
```

---

## ✅ 环境检查清单

### 开发环境检查
- [ ] Node.js 18.18.0 LTS 已安装
- [ ] HBuilderX 3.8+ 已安装
- [ ] 微信开发者工具已安装
- [ ] 项目已导入 HBuilderX
- [ ] 微信小程序 AppID 已配置
- [ ] 项目可以正常运行

### 开发效率检查
- [ ] 代码片段已配置
- [ ] 热重载正常工作
- [ ] TypeScript 类型检查正常
- [ ] SCSS 编译正常
- [ ] Git 版本控制已配置

### 项目结构检查
- [ ] 目录结构完整
- [ ] 配置文件正确
- [ ] 静态资源可访问
- [ ] 页面路由配置正确
- [ ] 组件导入正常

---

## 🎯 下一步

环境配置完成后，建议按以下顺序学习：

1. **[第一个页面开发](./第一个页面.md)** - 创建第一个页面
2. **[uni-app开发指南](../03-开发指南/uni-app开发指导文档.md)** - 框架使用指南
3. **[样式系统文档](../03-样式系统/样式规范.md)** - 样式开发规范
4. **[组件开发指南](../04-组件开发/组件概览.md)** - 组件开发标准

---

**文档维护**: 叨叨房车技术团队
**最后更新**: 2025-11-24
**版本**: v1.0.0
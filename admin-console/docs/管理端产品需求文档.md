# 叨叨房车管理端产品需求文档

**文档版本**: v1.0.0 | **创建时间**: 2025-11-26 | **维护者**: 叨叨房车技术团队

**文档类型**: 产品需求文档 | **适用对象**: 产品经理、UI设计师、开发人员、测试人员

---

## 📋 文档说明

本文档专注于叨叨房车管理端的完整功能需求描述，涵盖管理员可见的所有业务功能、管理流程和系统配置。本文档不涉及具体技术实现方案，技术栈和开发实施将由其他专项文档承担。

### ⚠️ 重要：前端独立开发模式

**本项目采用前端独立开发，后端逐一对接的开发模式**

#### 开发阶段说明

**阶段一：前端独立开发（当前阶段）**
- ✅ 使用 Mock 数据完成所有页面和功能
- ✅ 不依赖后端服务，不启动 backend 项目
- ✅ 专注于 UI/UX 实现和前端交互逻辑
- ✅ 在 `docs/管理端API.md` 中记录所有 API 需求和状态

**阶段二：后端对接（未来）**
- 🔄 前端开发完成后，再启动后端服务
- 🔄 逐个接口进行联调测试
- 🔄 切换 Mock 数据为真实 API 调用

#### 开发规范

**必须遵守：**
1. 📖 开发前阅读本文档和 `管理端技术栈文档.md`
2. 📦 **优先使用通用组件库**（详见 [通用组件库使用文档](./通用组件库使用文档.md)）
   - 17个高度可复用组件，覆盖95%业务场景
   - 可节省约8.2倍开发时间
   - 包含：PageHeader、DataTable、SearchForm、FilterPanel、BatchOperation、ApprovalFlow、StatusTimeline、ChartCard、RichTextEditor 等
3. 📝 每完成一个功能模块，更新 `实施计划.md`
4. 📊 在 `管理端API.md` 中记录 API 状态：
   - 🔴 未开发
   - 🟡 已开发（使用Mock）
   - 🟠 待后端开发
   - 🔵 待联调
   - 🟢 联调完成

**禁止操作：**
- ❌ 不要启动后端服务
- ❌ 不要修改 vite.config.ts 的代理配置
- ❌ 不要等待后端 API 开发
- ❌ 不要直接调用未开发的后端接口
- ❌ 不要重复开发已有的通用组件

---

## 📋 目录

1. [产品概述](#1-产品概述)
2. [系统架构与用户角色](#2-系统架构与用户角色)
3. [核心功能需求](#3-核心功能需求)
4. [营销运营功能需求](#4-营销运营功能需求)
5. [系统管理功能需求](#5-系统管理功能需求)
6. [数据分析功能需求](#6-数据分析功能需求)
7. [业务流程需求](#7-业务流程需求)
8. [权限与安全需求](#8-权限与安全需求)
9. [验收标准](#9-验收标准)

---

## 1. 产品概述

### 1.1 产品定位

叨叨房车管理端是面向运营团队的综合性后台管理系统，为小程序端提供内容配置、规则管理、业务审核、数据分析等全方位支撑服务。系统支持多层级权限控制，实现灵活的业务配置和统一管理。

### 1.2 核心业务模块

| 业务模块 | 功能描述 | 目标用户 |
|----------|----------|----------|
| **核心业务管理** | 用户、车辆、门店、订单、众筹、合作、营地管理 | 全体运营人员 |
| **营销运营管理** | 价格策略、优惠券、营销活动、社区、客服、分润管理 | 营销运营团队 |
| **系统管理** | 员工、权限、系统配置管理 | 系统管理员、HR |
| **数据分析** | 工作台、财务管理、数据监控 | 管理层、财务人员 |

### 1.3 系统特点

- **四层角色权限体系**：平台管理员、区域经理、门店经理、门店员工
- **双轨制业务管理**：众筹车辆标准化管理 + 合作车辆独立管理
- **统一分润管理**：整合所有分润类型，提供完整的分润解决方案
- **智能业务调度**：基于需求的车辆推荐调度和订单自动处理

---

## 2. 系统架构与用户角色

### 2.1 菜单架构设计

#### A. 核心业务管理

```text
├── 👥 用户管理
│   ├── 用户列表
│   ├── 标签管理
│   ├── 风控管理
│   └── 黑名单
│
├── 🚗 车辆管理
│   ├── 车型库管理
│   ├── 车辆列表
│   ├── 车辆状态
│   ├── 维保管理
│   ├── 保险管理
│   └── 违章管理
│
├── 🏪 门店管理
│   ├── 门店列表
│   ├── 门店设置
│   ├── 服务配置
│   ├── 城市管理
│   └── 区域管理
│
├── 📋 订单管理
│   ├── 订单列表
│   ├── 订单详情
│   ├── 异常处理
│   ├── 退款管理
│   └── 评价管理
│
├── 💰 托管管理
│   ├── 自有车托管
│   ├── 购车托管
│   ├── 托管车辆
│   └── 收益管理
│
├── 🤝 合作商管理
│   ├── 合作商列表
│   ├── 合作商门店
│   ├── 合作商订单
│   └── 合作商结算
│
├── 🏭 供应商管理
│   ├── 维保供应商
│   ├── 保险供应商
│   └── 其他供应商
│
└── ⛺ 营地管理
    ├── 营地列表
    ├── 营地设置
    ├── 预订管理
    └── 咨询配置
```

#### B. 营销运营管理

```text
├── 🎯 营销管理
│   ├── 价格策略
│   ├── 优惠券管理
│   ├── 营销活动
│   ├── 特惠套餐
│   ├── 房车旅游
│   └── 增值费用管理
│
├── 🌐 社区管理
│   ├── 内容审核
│   ├── 社区配置
│   ├── 举报处理
│   └── 内容管理
│
├── 📞 客服管理
│   ├── 客服配置
│   ├── 工单管理
│   ├── 质量监控
│   └── 知识库
│
└── 💸 分润管理
    ├── 托管分润
    ├── 合作商订单分润
    ├── 员工激励
    ├── 推广分润
    ├── 分润配置
    ├── 结算管理
    └── 提现审核
```

#### C. 系统管理

```text
├── 👤 员工管理
│   ├── 员工列表
│   ├── 角色分配
│   ├── 门店员工
│   ├── 客服人员
│   └── 绩效管理
│
├── 🔐 权限管理
│   ├── 角色管理
│   ├── 权限配置
│   ├── 菜单权限
│   ├── 数据权限
│   └── 操作日志
│
└── ⚙️ 系统管理
    ├── 系统配置
    ├── 参数设置
    ├── 智能预警
    ├── 系统监控
    ├── 审计日志
    └── 数据备份
```

#### D. 数据分析

```text
├── 🏠 工作台
│   ├── 数据概览
│   ├── 今日待办
│   └── 快捷操作
│
└── 💰 财务管理
    ├── 收入统计
    ├── 支出管理
    ├── 对账结算
    ├── 财务报表
    └── 发票管理
```

### 2.2 四层角色权限体系

| 角色 | 数据权限范围 | 功能权限范围 | 主要职责 |
|------|-------------|-------------|----------|
| **平台管理员** | 全平台数据 | 所有功能权限 | 系统配置、全局管理 |
| **区域经理** | 所辖区域所有门店 | 区域管理权限 | 区域运营、跨门店协调 |
| **门店经理** | 本门店数据 | 门店管理权限 | 门店运营、员工管理 |
| **门店员工** | 分配的任务数据 | 基础操作权限 | 订单处理、客户服务 |

### 2.3 页面布局设计

**页面结构**:
- **顶部导航栏**：Logo、用户信息、消息通知、退出登录
- **左侧菜单栏**：功能菜单、权限过滤、折叠展开
- **主内容区**：页面标题、面包屑导航、功能内容、分页
- **底部状态栏**：系统状态、版权信息、技术支持

**导航流程设计**:

```text
登录 → 权限验证 → 菜单加载 → 功能页面
├── 根据角色显示对应菜单
├── 根据数据权限过滤数据范围
├── 提供面包屑导航
└── 支持快捷操作入口
```

---

## 3. 核心功能需求

### 3.1 用户管理模块

#### 核心功能需求
- **用户信息管理**：用户信息查看、状态管理、数据统计
- **标签管理**：用户标签分类、批量标签操作
- **风控管理**：异常用户识别、风险控制措施
- **黑名单管理**：风险用户黑名单维护

#### 关键业务要求
- **用户数据同步**：与小程序端用户数据实时同步
- **标签体系**：支持多维用户标签分类和批量操作
- **黑名单机制**：支持手动和自动黑名单管理

#### 数据需求
- **users** (用户表) - 基础用户信息管理
- **user_tags** (用户标签表) - 标签分类和关联管理

### 3.2 车辆管理模块

#### 核心功能需求
- **车型库管理**：车辆品牌、型号、配置参数管理
- **车辆列表**：车辆档案、状态跟踪、位置管理
- **车辆状态**：可用性、维修、保养状态实时管理
- **维保管理**：维修保养计划、记录、成本管理
- **保险管理**：保险购买、理赔、续保管理
- **违章管理**：违章记录查询、处理、扣分管理
- **整备监控**（新增）：监控车辆整备进度、质量检查、费用审核

#### 车辆整备监控功能（新增）

**监控功能**：
1. **整备任务列表**：查看所有待整备、整备中、已完成的车辆
2. **进度跟踪**：实时查看整备进度和预计完成时间
3. **质量检查**：查看整备前后照片对比，检查整备质量
4. **费用审核**：审核整备费用，超预算需特别审批
5. **超时提醒**：整备超时自动提醒相关人员
6. **统计分析**：整备时长、费用、质量统计分析

**监控规则**：
- 清洁整备超过24小时自动提醒
- 轻微维修超过3天自动上报
- 定期保养按保养计划执行
- 整备费用超过预算需管理层审批
- 整备质量不合格需重新整备
- **重要说明**：事故/重大故障处理在"异常订单管理"中监控，不在整备监控中

#### 关键业务要求
- **多来源车辆管理**：
  - 自有车辆：直营门店自有车辆
  - 托管车辆：车主托管车辆
  - 加盟车辆：加盟商车辆
  - 合作商车辆：合作商门店车辆，使用统一车型库
- **智能调度**：基于需求和位置的车辆推荐调度
- **状态同步**：车辆状态与小程序端实时同步
- **档案完整**：完整的车辆电子档案和维护记录
- **整备管理**：完整的整备流程监控和质量管理

#### 数据需求
- **vehicles** (车辆表) - 车辆基础信息和状态
- **vehicle_models** (车型表) - 车型配置参数
- **hosting_vehicles** (托管车辆表) - 托管车辆管理
- **partner_vehicles** (合作商车辆表) - 合作商车辆管理

### 3.3 门店管理模块

#### 核心功能需求
- **门店列表**：门店基础信息、联系方式、营业时间
- **门店设置**：门店类型、服务范围、权限配置
- **服务配置**：不同门店类型的服务差异化配置
- **城市管理**：城市信息、服务范围、配送区域
- **区域管理**：区域划分、区域经理分配

#### 关键业务要求
- **三类门店管理**：
  - 直营店：完全标准化管理
  - 加盟店：部分标准化管理
  - 合作商门店：合作商车辆展示和订单服务
- **差异化配置**：不同门店类型的服务和价格差异化
- **员工分配**：门店员工分配和权限管理
- **业绩统计**：门店业绩数据统计和分析

#### 数据需求
- **stores** (门店表) - 门店基础信息
- **employees** (员工表) - 员工信息和门店分配
- **store_vehicles** (门店车辆表) - 门店车辆分配

### 3.4 订单管理模块

#### 核心功能需求
- **订单列表**：订单查询、筛选、批量操作
- **订单详情**：订单完整信息展示和操作
- **异常订单处理**：车辆故障处理、交通事故处理、异常订单状态管理
- **退款管理**：退款申请、审核、处理
- **评价管理**：用户评价查看、回复、分析
- **合作商订单信息**：手动填写合作商订单号和价格，自动计算差价和分润

#### 关键业务要求
- **多类型订单处理**：
  - 自有/托管/加盟订单：标准化服务流程、自动分润
  - 合作商订单：手动订单对接、差价计算、门店服务分润
- **状态同步**：订单状态与小程序端实时同步
- **异常订单处理**（订单进行中发生的故障/事故）：
  - **车辆故障处理**：
    - 接收故障申报（客户或员工申报）
    - 订单自动进入"挂起"状态，记录挂起时间点
    - 联系道路救援服务
    - 现场评估故障严重程度
    - 安排故障车辆维修
    - 计算费用（停运损失、维修费、车辆折旧损失等）
    - 责任划分（用户付费、平台减免、混合方式）
    - 提供处理结果选择：
      - 方案1：更换车辆（订单继续）
      - 方案2：终止订单并退款补偿（订单完成）
      - 方案3：其它补偿（延长租期、费用减免等，订单继续）
    - 订单状态恢复（根据处理结果，订单继续或完成）
    - 故障车辆维修后进入整备流程
  - **交通事故处理**：
    - 接收事故申报（客户或员工申报）
    - 订单自动进入"挂起"状态，记录挂起时间点
    - 24小时内报保险公司
    - 查看事故现场照片（不少于10张）
    - 跟踪定损评估进度
    - 安排事故车辆维修
    - 计算费用（停运损失、维修费、车辆折旧损失等）
    - 责任划分（用户付费、平台减免、保险理赔、混合方式）
    - 跟踪保险理赔进度
    - 提供处理结果选择：
      - 方案1：更换车辆（订单继续）
      - 方案2：终止订单并退款补偿（订单完成）
      - 方案3：其它补偿（延长租期、费用减免等，订单继续）
    - 订单状态恢复（根据处理结果，订单继续或完成）
    - 事故车辆维修后进入整备流程
  - **异常订单状态管理**：
    - 挂起：订单进行中发生异常，订单暂停，租金暂停计算
    - 异常处理中：正在处理异常（道路救援、维修、定损等）
    - 待解决：异常已记录，等待处理方案选择
    - 已解决：异常处理完成，订单恢复或完成
  - **费用计算规则**：
    - 挂起期间租金暂停计算（不计入订单费用）
    - 挂起期间费用按当日车辆价格计算（停运损失+维修费+折旧损失）
    - 挂起期间费用为单独费用，不参与推广或分润计算
    - 费用承担方根据责任划分确定（用户付费、平台减免、保险理赔、混合方式）
  - **与整备流程的关系**：
    - 异常处理完成后，车辆自动进入整备流程
    - 整备流程包括：车辆检查、车辆清洁、轻微维修（可选）、定期保养（可选）
- **批量操作**：支持订单批量处理和导出

#### 数据需求
- **orders** (订单表) - 订单基础信息
- **order_items** (订单明细表) - 订单详细项目
- **order_payments** (支付记录表) - 支付和退款记录

### 3.5 托管管理模块

#### 核心功能需求
- **自有车托管**：自有车托管申请审核、车辆评估、协议管理
- **购车托管**：购车托管申请审核、资质审核、购车跟进
- **托管车辆**：托管车辆列表、状态管理、运营监控
- **收益管理**：收益统计、收益明细、提现审核、分成配置

#### 自有车托管管理
- **申请审核**：
  - 查看车辆信息和照片（至少12张）
  - 核验行驶证真实性和有效性
  - 评估车辆状况（车龄、里程、外观）
  - 检查托管资格（车龄≤8年、无重大事故、手续齐全）
  - 审核通过/拒绝，填写审核意见
  - 线下签署协议提醒和跟进

- **车辆管理**：
  - 托管车辆列表和详情查看
  - 车辆状态管理（运营中、维护中、车主自用）
  - 车辆位置和运营数据监控
  - 维保计划和保险管理

#### 购车托管管理
- **申请审核**：
  - 查看申请人资质信息
  - 核验身份证、收入证明
  - 评估信用状况和还款能力
  - 审核分期方案合理性
  - 审核通过/拒绝，填写审核意见
  - 协助购车流程跟进

- **购车跟进**：
  - 购车进度跟踪
  - 车辆交付确认
  - 托管协议签署
  - 车辆入库和上线

#### 车主自用审核
- **申请审核**：
  - 查看自用申请详情
  - 检查车辆当前状态和位置
  - 核对取还车时间和门店
  - 检查时间冲突（订单、维保）
  - 计算费用（服务费、异地还车费）
  - 审核通过/拒绝

#### 收益管理
- **收益统计**：
  - 托管车辆总收益统计
  - 车主收益和平台收益分析
  - 收益趋势图表展示
  - 按车辆、车主、时间维度统计

- **收益明细**：
  - 每日收益明细记录
  - 收益来源分类（租赁、服务费等）
  - 收益分成计算明细
  - 收益发放记录

- **提现审核**：
  - 车主提现申请审核
  - 提现金额和账户验证
  - 提现审批流程
  - 提现记录和状态跟踪

- **分成配置**：
  - 自有车托管分成比例配置（默认车主70%，平台30%）
  - 购车托管保底收益配置（默认3500元/月）
  - 淡季补贴配置（11.15-3.15期间）
  - 车主自用费用配置（服务费200-500元/次）

#### 关键业务要求
- **审核时效**：自有车托管1-3个工作日，购车托管3-5个工作日，车主自用1个工作日
- **照片审核**：支持照片查看器缩放、滑动、对比功能
- **自动通知**：审核结果自动通知申请人
- **收益计算**：准确的收益计算和分配机制
- **风险控制**：托管车辆的风险评估和预警机制
- **数据监控**：实时的托管车辆运营数据监控

#### 数据需求
- **hosting_applications** (托管申请表) - 自有车/购车托管申请记录
- **hosting_vehicles** (托管车辆表) - 托管车辆基础信息
- **hosting_income** (托管收益表) - 收益记录和明细
- **hosting_withdrawals** (提现记录表) - 提现申请和审核记录
- **hosting_self_use** (车主自用表) - 车主自用申请和记录

### 3.6 合作商管理模块

#### 核心概念定义

**合作商（Partner Merchant）**：
- 定义：房车生活家等全国连锁房车租赁供应商
- 合作方式：平台展示 + 手动订单代理 + 差价分润
- 与供应商的区别：
  - 合作商：提供房车租赁服务（房车生活家）
  - 供应商：提供维保/保险等服务（维修厂、保险公司）

#### 核心功能需求

1. **合作商信息管理**
   - 合作商基础信息（公司名称、联系方式、合作协议）
   - 合作商状态管理（合作中、已停止）
   - 合作商评级和信用管理

2. **合作商门店管理**
   - 关联到门店管理模块
   - 查看合作商的所有门店列表
   - 门店类型标记为"合作商门店"

3. **合作商订单管理**
   - 手动填写合作商订单信息
   - 自动计算订单差价
   - 差价分润计算和记录

4. **合作商结算统计**
   - 订单量统计（按时间、门店维度）
   - 差价统计和趋势分析
   - 分润明细和结算记录

#### 关键业务要求

**手动订单对接流程**：
1. 用户在小程序下单（选择合作商车辆）
2. 生成叨叨订单（订单号、订单价格）
3. 管理员手动到合作商网站下单
4. 获取合作商订单号和订单价格
5. 在管理端填入合作商订单信息
6. 系统自动计算差价和分润

**差价计算公式**：

```text
订单差价 = 叨叨订单价格 - 合作商订单价格
门店分润金额 = 订单差价 × 门店分润比例（默认30%）
平台收益 = 订单差价 × (1 - 门店分润比例)
```

**门店服务说明**：
- 服务门店提供订单服务（用户咨询 + 订单对接）
- 不是取还车服务（取还车由合作商负责）
- 门店获得差价的一部分作为服务费

#### 数据需求

- **partner_merchants** (合作商表) - 合作商基础信息
  - id, name, contact_person, phone, email, address
  - cooperation_status, credit_rating, contract_url
  - profit_sharing_ratio (门店分润比例，默认30%)
  - created_at, updated_at

- **partner_orders** (合作商订单表) - 合作商订单信息
  - id, order_id (关联叨叨订单)
  - partner_merchant_id, partner_order_no
  - daodao_order_price, partner_order_price
  - price_difference (差价，自动计算)
  - store_profit_amount (门店分润金额，自动计算)
  - platform_profit_amount (平台收益，自动计算)
  - created_by, created_at, updated_at

- **partner_settlements** (合作商结算表) - 结算记录
  - id, partner_merchant_id, settlement_period
  - total_orders, total_price_difference
  - total_store_profit, total_platform_profit
  - settlement_status, settlement_date

### 3.7 供应商管理模块

#### 核心概念定义

**供应商（Service Supplier）**：
- 定义：为平台提供维保、保险等服务的供应商
- 类型：维保供应商、保险供应商、其他服务供应商
- 与合作商的区别：供应商不提供房车租赁服务

#### 核心功能需求

1. **维保供应商管理**
   - 维修厂、保养服务商信息管理
   - 服务范围、服务价格、服务质量评估
   - 维保记录和成本统计

2. **保险供应商管理**
   - 保险公司、保险代理信息管理
   - 保险产品、保险价格、理赔服务评估
   - 保险记录和费用统计

3. **其他服务供应商管理**
   - 其他服务提供商信息管理
   - 服务评估和合作管理

#### 关键业务要求

- **供应商评估**：服务质量、价格、响应速度评估
- **供应商合作**：合作协议、服务标准管理
- **供应商结算**：服务费用结算管理

#### 数据需求

- **service_suppliers** (服务供应商表) - 供应商基础信息
  - id, name, type (maintenance/insurance/other)
  - contact_person, phone, email, address
  - service_scope, price_range, quality_rating
  - cooperation_status, contract_url
  - created_at, updated_at

### 3.8 营地管理模块

#### 核心功能需求
- **营地列表**：营地基础信息、设施配置
- **营地设置**：服务标准、价格配置
- **预订管理**：营地预订、取消、结算
- **咨询管理**：营地咨询回复、问题处理

#### 关键业务要求
- **设施管理**：详细的营地设施配置和管理
- **价格配置**：灵活的营地定价策略
- **预订同步**：与小程序端营地预订实时同步
- **咨询处理**：及时的营地咨询回复机制

#### 数据需求
- **campsites** (营地表) - 营地基础信息
- **campsite_reservations** (营地预订表) - 预订记录管理

---

## 4. 营销运营功能需求

### 4.1 营销管理模块

#### 核心功能需求
- **价格策略**：动态价格、季节价格、促销价格管理
- **优惠券管理**：优惠券创建、发放、核销、统计
- **营销活动**：活动策划、执行、效果分析
- **特惠套餐**：套餐组合、价格配置、促销管理
- **房车旅游**：旅游路线、批次管理、成团管理
- **增值费用**：附加服务费用配置和管理

#### 关键业务要求
- **动态定价**：基于供需、季节、节假日的智能定价
- **精准营销**：基于用户画像的精准营销策略
- **效果追踪**：完整的营销活动效果追踪和分析
- **套餐优化**：基于数据的套餐组合优化

#### 数据需求
- **pricing_rules** (价格规则表) - 价格策略配置
- **coupons** (优惠券表) - 优惠券管理
- **promotion_activities** (促销活动表) - 营销活动管理

### 4.2 社区管理模块

#### 核心功能需求
- **内容审核**：用户发布内容审核、管理
- **社区配置**：社区规则、版块管理
- **举报处理**：用户举报处理、违规处理
- **内容管理**：优质内容推荐、内容分类

#### 关键业务要求
- **内容审核**：AI+人工双重审核机制
- **快速响应**：举报内容的快速处理机制
- **内容质量**：优质内容的识别和推荐
- **社区规则**：清晰的社区规则和执行机制

#### 数据需求
- **community_posts** (社区帖子表) - 内容管理
- **community_reports** (举报记录表) - 举报处理

### 4.3 客服管理模块

#### 核心功能需求
- **客服配置**：智能路由分配、技能分组
- **工单管理**：工单创建、分配、处理、关闭
- **质量监控**：响应时间、解决率监控
- **知识库管理**：常见问题、标准答案管理

#### 关键业务要求
- **智能路由**：基于问题类型和客服技能的智能分配
- **SLA管理**：服务水平协议的监控和管理
- **知识共享**：完善的知识库和经验共享机制
- **质量提升**：基于数据的客服质量持续改进

#### 数据需求
- **customer_service_records** (客服记录表) - 客服交互记录
- **service_tickets** (工单表) - 工单管理

### 4.4 分润管理模块

#### 核心功能需求
- **托管分润**：托管车辆收益分润管理
- **合作商订单分润**：合作商订单差价分润管理
- **员工激励**：员工绩效激励分润管理
- **推广分润**：用户推广推荐分润管理
- **分润配置**：分润规则和比例配置
- **结算管理**：分润结算、批量处理
- **提现审核**：提现申请、审核、打款

#### 关键业务要求
- **统一管理**：所有分润类型的统一管理界面
- **自动计算**：基于规则的自动分润计算
- **透明结算**：透明的分润明细和结算流程
- **风险控制**：分润资金的安全和风险控制
- **合作商订单分润配置**：全局配置门店分润比例（默认30%），门店提供订单服务（用户咨询+订单对接）

#### 数据需求
- **profit_distributions** (分润记录表) - 分润记录
- **withdrawal_requests** (提现申请表) - 提现管理

---

## 5. 系统管理功能需求

### 5.1 员工管理模块

#### 核心功能需求
- **员工档案**：员工基础信息、入职离职管理
- **角色分配**：员工角色分配、权限配置
- **门店员工**：门店员工分配、调动管理
- **客服人员**：客服人员配置、技能管理
- **绩效管理**：工作绩效、服务质量考核
- **注册审核**（新增）：审核移动端提交的注册申请（员工、清洁工、服务商、合作方）

#### 注册审核功能（新增）

**审核流程**：
1. **查看注册申请列表**：按角色类型、提交时间、审核状态筛选
2. **查看申请详情**：查看申请人基础信息、资质证明、证件照片
3. **资质验证**：
   - 身份证真实性验证
   - 资质证书有效性验证
   - 营业执照查询验证（企业）
4. **审核决策**：
   - 通过：分配角色标签和权限，发送审核通过通知
   - 拒绝：填写拒绝原因，发送拒绝通知
   - 待补充：要求申请人补充资料
5. **权限分配**：审核通过后自动分配对应角色权限
6. **账号激活**：审核通过后账号自动激活，可登录三端

**审核规则**：
- 平台员工：需验证身份信息，分配门店和职位
- 清洁工：需验证身份信息，设置服务区域
- 服务商：需验证资质证书和营业执照，设置服务类型
- 合作方：需验证营业执照和合作协议，设置合作类型

#### 关键业务要求
- **权限适配**：员工权限与角色的精准匹配
- **绩效评估**：科学的绩效考核体系
- **技能管理**：客服人员的技能等级管理
- **人员调度**：基于业务需求的人员调度
- **审核时效**：注册申请需在3个工作日内完成审核

#### 数据需求
- **employees** (员工表) - 员工基础信息
- **employee_performance** (员工绩效表) - 绩效记录

### 5.2 权限管理模块

#### 核心功能需求
- **角色管理**：角色创建、权限分配、角色继承
- **权限配置**：功能权限、数据权限配置
- **菜单权限**：基于角色的菜单显示控制
- **数据权限**：基于角色的数据范围控制
- **操作日志**：操作行为记录和查询

#### 关键业务要求
- **精确控制**：权限控制精确到操作级别
- **灵活配置**：支持灵活的权限组合配置
- **权限继承**：支持角色权限继承机制
- **审计追踪**：完整的操作审计日志

#### 数据需求
- **roles** (角色表) - 角色定义和权限
- **admin_permissions** (管理权限表) - 权限配置
- **operation_logs** (操作日志表) - 操作审计

### 5.3 系统管理模块

#### 核心功能需求
- **系统配置**：基础参数、业务规则配置
- **参数设置**：系统参数、阈值配置
- **智能预警**：业务异常、系统异常预警
- **系统监控**：性能监控、资源监控
- **审计日志**：系统操作审计日志
- **数据备份**：数据备份、恢复管理

#### 关键业务要求
- **配置灵活**：支持灵活的系统配置调整
- **预警及时**：及时的业务和系统异常预警
- **监控全面**：全面的系统和业务监控
- **备份可靠**：可靠的数据备份和恢复机制

#### 数据需求
- **system_configs** (系统配置表) - 系统参数配置

---

## 6. 数据分析功能需求

### 6.1 工作台模块

#### 核心功能需求
- **数据概览**：关键业务指标实时展示
- **今日待办**：待处理任务、预警信息
- **快捷操作**：常用功能快速入口
- **趋势分析**：业务数据趋势图表

#### 关键业务要求
- **实时数据**：关键指标的实时更新
- **个性化**：基于角色的个性化工作台
- **交互友好**：直观的数据可视化和交互
- **决策支持**：支持管理决策的数据展示

#### 数据需求
- **business_metrics** (业务指标表) - 业务指标数据

### 6.2 财务管理模块

#### 核心功能需求
- **收入统计**：各业务线收入统计分析
- **支出管理**：运营成本、支出项目管理
- **对账结算**：财务对账、结算管理
- **财务报表**：利润表、现金流量表等报表
- **发票管理**：发票开具、管理、统计

#### 关键业务要求
- **数据准确**：财务数据的绝对准确性
- **报表完整**：完整的财务报表体系
- **合规性**：符合财务法规要求
- **审计追踪**：完整的财务操作审计

#### 数据需求
- **financial_records** (财务记录表) - 财务数据记录

---

## 7. 业务流程需求

### 7.1 车辆上架流程

**流程步骤**：
1. **车辆录入**：基础信息、配置参数录入
2. **信息审核**：车辆信息完整性和准确性审核
3. **标签配置**：车辆特色标签和服务标签配置
4. **价格设置**：租赁价格、保险费用配置
5. **门店分配**：车辆归属门店和可用区域设置
6. **上架销售**：车辆在小程序端上架展示

**关键流程要求**：
- **信息完整**：车辆信息必须完整准确才能上架
- **审核严格**：严格的车辆审核机制保证服务质量
- **价格合理**：基于市场和成本的合理定价
- **状态同步**：上架状态与小程序端实时同步

### 7.2 众筹项目管理流程

**流程步骤**：
1. **项目创建**：项目基本信息、目标金额设置
2. **尽职调查**：项目可行性、风险评估
3. **审核批准**：多级审核和项目评审
4. **上线募资**：项目上线、份额销售
5. **车辆采购**：资金到位后车辆采购和配置
6. **运营管理**：项目运营、收益分配
7. **项目结束**：项目到期、份额赎回

**关键流程要求**：
- **风险控制**：严格的项目风险评估和控制
- **透明操作**：项目信息完全透明化
- **收益保障**：合理的收益分配机制
- **全程监控**：项目全流程的风险监控

### 7.3 订单处理流程

**众筹订单流程**：
1. **订单创建**：用户在小程序端创建订单
2. **自动分润**：系统自动计算各参与方分润
3. **服务安排**：车辆准备、门店服务安排
4. **订单确认**：门店确认订单和服务准备
5. **服务执行**：用户取车、开始使用
6. **完成结算**：还车、费用结算、分润分配

**合作订单流程**：
1. **订单创建**：用户在小程序端创建订单
2. **第三方协调**：与合作商协调服务安排
3. **差价计算**：计算平台差价收益
4. **服务指引**：为用户提供服务指引
5. **订单确认**：确认合作商服务安排
6. **完成结算**：与合作商进行费用结算

**关键流程要求**：
- **自动处理**：众筹订单的自动化处理流程
- **协调顺畅**：合作订单的第三方协调机制
- **分润准确**：准确的分润计算和分配
- **服务保障**：服务质量的一致性保障

### 7.4 客服工单处理流程

**流程步骤**：
1. **工单创建**：用户咨询或问题反馈创建工单
2. **智能路由**：基于问题类型自动分配客服
3. **问题处理**：客服专业处理和回复
4. **质量监控**：服务质量监控和评估
5. **工单关闭**：问题解决后工单关闭
6. **满意度调查**：用户满意度回访和收集

**关键流程要求**：
- **快速响应**：及时的工单响应和处理
- **专业解答**：专业的客服解答和服务
- **质量保证**：服务质量的监控和保证
- **持续改进**：基于反馈的持续改进机制

### 7.5 分润结算流程

**流程步骤**：
1. **分润计算**：基于规则自动计算各参与方分润
2. **分润确认**：各参与方确认分润金额
3. **结算生成**：生成结算单和付款指令
4. **提现申请**：合作方提交提现申请
5. **审核批准**：财务审核和批准提现
6. **资金划转**：资金划转到指定账户
7. **完成记录**：记录分润和结算完成状态

**关键流程要求**：
- **计算准确**：分润计算的绝对准确性
- **透明公开**：分润过程的完全透明
- **及时结算**：及时的结算和资金划转
- **安全可靠**：资金安全和风险控制

---

## 8. 权限与安全需求

### 8.1 权限控制要求

**功能权限控制**：
- **菜单级控制**：基于角色的菜单访问控制
- **功能级控制**：具体功能操作的权限控制
- **数据级控制**：数据访问范围的权限控制
- **字段级控制**：敏感字段的访问权限控制

**数据权限控制**：
- **平台管理员**：全平台数据访问权限
- **区域经理**：所辖区域所有门店数据权限
- **门店经理**：本门店完整数据权限
- **门店员工**：分配的任务数据访问权限

### 8.2 安全防护要求

**身份认证**：
- **强密码策略**：密码复杂度要求
- **多因素认证**：支持短信验证码、邮箱验证
- **会话管理**：安全的会话管理和超时机制
- **单点登录**：支持SSO集成

**数据安全**：
- **数据加密**：敏感数据加密存储
- **传输安全**：HTTPS加密传输
- **数据备份**：定期数据备份和恢复测试
- **访问日志**：完整的访问日志记录

### 8.3 操作审计要求

**操作记录**：
- **完整记录**：所有关键操作的完整记录
- **操作追踪**：操作行为的完整追踪链路
- **异常监控**：异常操作的实时监控和告警
- **审计报告**：定期的安全审计报告

**合规要求**：
- **数据保护**：符合数据保护法规要求
- **隐私保护**：用户隐私数据的保护措施
- **安全标准**：符合行业安全标准要求

---

## 9. 验收标准

### 9.1 功能完整性

**核心业务功能验收**：
- **用户管理**：用户信息管理、标签管理功能完整
- **车辆管理**：双轨制车辆管理、状态跟踪、智能调度功能正常
- **订单管理**：订单全流程管理、异常处理、状态同步功能完善
- **托管管理**：申请审核、车辆管理、收益计算、提现审核功能准确
- **营销管理**：价格策略、优惠券、营销活动功能灵活可用

**系统管理功能验收**：
- **权限管理**：四层角色权限体系精确控制
- **员工管理**：员工档案、角色分配、绩效管理功能完整
- **系统管理**：系统配置、监控、备份功能稳定
- **数据分析**：工作台、财务管理、报表功能准确

### 9.2 业务逻辑准确性

**双轨制业务准确性**：
- **众筹业务**：众筹车辆管理、分润计算准确无误
- **合作业务**：合作车辆管理、差价计算正确
- **订单处理**：两类订单的处理流程和分润逻辑正确

**数据计算准确性**：
- **财务计算**：分润、结算、退款计算100%准确
- **库存管理**：车辆、营位库存状态实时准确
- **统计分析**：各项统计数据准确无误

### 9.3 用户体验要求

**界面体验**：
- **响应速度**：页面加载时间<3秒，操作响应<1秒
- **操作便捷**：批量操作、快捷操作、智能推荐
- **信息清晰**：数据展示层次清晰，重要信息突出
- **错误友好**：友好的错误提示和操作指引

**管理效率**：
- **流程简化**：复杂的业务流程简化为简单操作
- **自动化**：重复性工作的自动化处理
- **决策支持**：基于数据的决策支持功能
- **移动适配**：支持移动端查看和简单操作

### 9.4 安全稳定性要求

**系统稳定性**：
- **可用性**：7×24小时系统可用性≥99.9%
- **并发性能**：支持100个管理员同时在线操作
- **数据安全**：数据备份、恢复、加密存储
- **访问控制**：精确的权限控制和访问审计

**业务安全性**：
- **资金安全**：分润、结算、提现资金安全保障
- **数据保护**：用户数据、商业数据的保护
- **操作审计**：完整的操作审计和追踪
- **风险控制**：业务风险识别和控制机制

---

## 📞 文档维护

**文档维护**: 叨叨房车产品团队
**技术支持**: 叨叨房车技术团队
**最后更新**: 2025-11-26
**版本**: v1.0.0
**下次审核**: 2025-12-26

---

**注意**：本文档专注于管理端功能需求描述，技术实现方案请参考相关技术文档。
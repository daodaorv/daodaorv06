# 管理端功能设计文档

**文档版本**: v2.0 | **创建时间**: 2025-11-11 | **适用范围**: 管理端所有功能模块

---

## 1. UI框架架构设计

### 1.1 开发优先级说明

**开发策略调整**: 在开始具体功能模块开发之前，必须优先完成管理端UI框架架构设计。管理端作为复杂的后台管理系统，清晰的页面结构和导航逻辑是所有功能模块的基础框架。

**重要性说明**:
- 确保管理端功能的完整覆盖和合理分类
- 为不同角色用户提供清晰的导航路径
- 避免功能模块开发时出现页面布局混乱或遗漏
- 为权限控制和数据权限设计提供基础

### 1.2 菜单架构设计

**管理端采用侧边栏菜单结构，分为四大功能模块**:

#### A. 核心业务管理
```
├── 👥 用户管理
│   ├── 用户列表
│   ├── 标签管理
│   ├── 信用评估
│   ├── 风控管理
│   └── 黑名单
│
├── 🚗 车辆管理
│   ├── 车型库管理
│   ├── 车辆列表
│   ├── 车辆状态
│   ├── 维保管理
│   ├── 保险管理
│   └── 违章管理
│
├── 🏪 门店管理
│   ├── 门店列表
│   ├── 门店设置
│   ├── 服务配置
│   ├── 城市管理
│   └── 区域管理
│
├── 📋 订单管理
│   ├── 订单列表
│   ├── 订单详情
│   ├── 异常处理
│   ├── 退款管理
│   └── 评价管理
│
├── 💰 众筹管理
│   ├── 众筹项目
│   ├── 车辆关联
│   ├── 份额管理
│   └── 份额交易
│
├── 🤝 合作管理
│   ├── 合作商管理
│   ├── 合作车辆
│   ├── 供应商管理
│   └── 结算管理
│
└── ⛺ 营地管理
    ├── 营地列表
    ├── 营地设置
    ├── 预订管理
    └── 咨询配置
```

#### B. 营销运营管理
```
├── 🎯 营销管理
│   ├── 价格策略
│   ├── 优惠券管理
│   ├── 营销活动
│   ├── 特惠套餐
│   ├── 房车旅游
│   └── 增值费用管理
│
├── 🌐 社区管理
│   ├── 内容审核
│   ├── 社区配置
│   ├── 举报处理
│   └── 内容管理
│
├── 📞 客服管理
│   ├── 客服配置
│   ├── 工单管理
│   ├── 质量监控
│   └── 知识库
│
└── 💸 分润管理
    ├── 众筹分润
    ├── 差价分润（合作商）
    ├── 员工激励
    ├── 推广分润
    ├── 分润配置
    ├── 结算管理
    └── 提现审核
```

#### C. 系统管理
```
├── 👤 员工管理
│   ├── 员工列表
│   ├── 角色分配
│   ├── 门店员工
│   ├── 客服人员
│   └── 绩效管理
│
├── 🔐 权限管理
│   ├── 角色管理
│   ├── 权限配置
│   ├── 菜单权限
│   ├── 数据权限
│   └── 操作日志
│
└── ⚙️ 系统管理
    ├── 系统配置
    ├── 参数设置
    ├── 智能预警
    ├── 系统监控
    ├── 审计日志
    └── 数据备份
```

#### D. 数据分析
```
├── 🏠 工作台
│   ├── 数据概览
│   ├── 今日待办
│   └── 快捷操作
│
└── 💰 财务管理
    ├── 收入统计
    ├── 支出管理
    ├── 对账结算
    ├── 财务报表
    └── 发票管理
```

### 1.3 权限控制架构

**四层角色权限体系**:

| 角色 | 数据权限范围 | 功能权限范围 | 主要职责 |
|------|-------------|-------------|----------|
| **平台管理员** | 全平台数据 | 所有功能权限 | 系统配置、全局管理 |
| **区域经理** | 所辖区域所有门店 | 区域管理权限 | 区域运营、跨门店协调 |
| **门店经理** | 本门店数据 | 门店管理权限 | 门店运营、员工管理 |
| **门店员工** | 分配的任务数据 | 基础操作权限 | 订单处理、客户服务 |

### 1.4 页面布局设计

**页面结构**:
- 顶部导航栏：Logo、用户信息、消息通知、退出登录
- 左侧菜单栏：功能菜单、权限过滤、折叠展开
- 主内容区：页面标题、面包屑导航、功能内容、分页
- 底部状态栏：系统状态、版权信息、技术支持

**导航流程设计**:
```
登录 → 权限验证 → 菜单加载 → 功能页面
├── 根据角色显示对应菜单
├── 根据数据权限过滤数据范围
├── 提供面包屑导航
└── 支持快捷操作入口
```

### 1.5 分润管理整合设计

**统一的分润管理模块**:
- 将原本分散在多个模块的分润功能统一整合
- 众筹分润：从众筹管理模块移入
- 差价分润：从合作管理模块移入
- 员工激励：从员工管理模块移入
- 推广分润：从营销管理模块移入

**分润类型覆盖**:
- 众筹项目车辆分润
- 合作车辆差价分润
- 员工绩效激励分润
- 用户推广推荐分润
- 平台服务费分润

---

## 2. 管理端概述

### 2.1 功能描述

叨叨房车管理端是面向运营团队的后台管理系统，为小程序端提供内容配置、规则管理、业务审核、数据分析等支撑服务。支持四层角色权限体系，实现灵活的业务配置和统一管理。

### 2.2 业务价值

- **灵活配置**: 小程序端所有展示内容和业务规则配置
- **统一管理**: 双轨制车辆、订单、价格体系的统一管理
- **完整审核**: 全流程审核机制和订单处理
- **实时监控**: 业务数据监控和分析决策支持

### 2.3 用户角色

- **平台管理员**: 系统级权限，全国所有数据和功能管理
- **区域经理**: 区域级权限，所辖区域数据和功能管理
- **门店经理**: 门店级权限，本门店数据和功能管理
- **门店员工**: 基础操作权限，分配的任务和功能操作

### 2.4 验收标准

- 支持四层角色权限体系，权限控制精确到操作级别
- 实现双轨制业务管理（众筹车辆+合作车辆）
- 支持批量操作和智能调度功能
- 提供完整的数据监控和分析报表
- 系统响应时间 < 3秒，并发支持100用户

---

## 3. 核心业务管理功能

### 3.1 用户管理模块

#### 功能描述
负责小程序端用户信息管理、标签管理、信用评估和风控管理，为小程序端用户业务提供数据分析和风险控制支撑。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 用户管理 | 用户信息管理 | 用户信息查看、用户状态管理、用户数据统计 | P0 |
| 标签管理 | 用户标签体系 | 用户标签分类、批量标签管理 | P1 |
| 信用评估 | 用户信用评级 | 基于历史行为评估用户信用等级 | P1 |
| 风控管理 | 风险用户识别 | 异常用户识别、限制操作 | P1 |
| 黑名单管理 | 黑名单用户 | 风险用户黑名单管理 | P2 |

#### 主要业务流程
- 用户信息管理流程：用户数据同步 → 信息分类 → 状态跟踪 → 数据分析
- 信用评估流程：行为数据收集 → 信用模型计算 → 等级评定 → 权限配置
- 风控处理流程：异常检测 → 风险评估 → 限制措施 → 监控跟踪

#### 数据需求
- **users** (用户表) - 数据字典: 01-用户相关表.md
- **user_tags** (用户标签表) - 数据字典: 01-用户相关表.md
- **user_credit_records** (信用记录表) - 数据字典: 01-用户相关表.md

### 3.2 车辆管理模块

#### 功能描述
实现双轨制车辆管理，支持众筹车辆标准化管理和合作车辆独立管理，包含车辆档案、状态管理、调度配置等功能。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 车辆档案管理 | 车辆信息维护 | 车辆基础信息、配置参数管理 | P0 |
| 众筹车辆管理 | 众筹车辆标准化 | 车辆众筹项目管理、分润配置 | P0 |
| 合作车辆管理 | 合作车辆独立管理 | 第三方车辆、服务标准配置 | P0 |
| 车辆状态管理 | 车辆状态跟踪 | 车辆可用性、维修状态管理 | P1 |
| 智能调度 | 车辆智能调度 | 基于需求的车辆推荐调度 | P2 |

#### 主要业务流程
- 车辆上架流程：车辆录入 → 信息审核 → 标签配置 → 上架销售
- 众筹车辆配置：项目创建 → 车辆关联 → 分润设置 → 上线运营
- 合作车辆接入：商户审核 → 车辆接入 → 服务标准配置 → 开始服务

#### 数据需求
- **vehicles** (车辆表) - 数据字典: 03-车辆相关表.md
- **vehicle_models** (车型表) - 数据字典: 03-车辆相关表.md
- **crowdfunding_vehicles** (众筹车辆表) - 数据字典: 05-众筹管理表.md

### 3.3 门店管理模块

#### 功能描述
管理三类门店（直营、加盟、合作商户），支持门店信息管理、服务差异化配置、员工分配等功能。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 门店信息管理 | 门店档案管理 | 门店基础信息、联系方式、营业时间 | P0 |
| 门店类型管理 | 三类门店配置 | 直营、加盟、合作商户差异化配置 | P0 |
| 服务配置 | 服务标准设置 | 不同门店类型服务差异化配置 | P1 |
| 员工分配 | 门店员工管理 | 门店员工分配、权限管理 | P1 |
| 业绩管理 | 门店业绩统计 | 门店业绩数据统计和分析 | P2 |

#### 主要业务流程
- 门店开设流程：申请提交 → 资质审核 → 系统配置 → 员工培训 → 正式运营
- 门店升级流程：业绩评估 → 升级申请 → 审核批准 → 权限升级 → 配置更新

#### 数据需求
- **stores** (门店表) - 数据字典: 03-车辆相关表.md
- **employees** (员工表) - 数据字典: 01-用户相关表.md
- **store_vehicles** (门店车辆表) - 数据字典: 03-车辆相关表.md

### 3.4 订单管理模块

#### 功能描述
支持双轨制订单处理，众筹订单自动化处理和合作订单指引服务，包含订单创建、状态跟踪、异常处理等功能。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 订单处理 | 订单全流程管理 | 订单创建、确认、完成全流程管理 | P0 |
| 众筹订单 | 众筹订单自动化 | 自动分润、服务标准统一 | P0 |
| 合作订单 | 合作订单指引服务 | 第三方协调、差价计算 | P0 |
| 异常处理 | 订单异常处理 | 订单取消、退款、纠纷处理 | P1 |
| 订单统计 | 订单数据分析 | 订单量、金额、用户分析 | P2 |

#### 主要业务流程
- 众筹订单流程：订单创建 → 自动分润计算 → 服务安排 → 完成结算
- 合作订单流程：订单创建 → 第三方协调 → 差价计算 → 服务指引 → 完成结算

#### 数据需求
- **orders** (订单表) - 数据字典: 04-订单业务表.md
- **order_items** (订单明细表) - 数据字典: 04-订单业务表.md
- **order_payments** (支付记录表) - 数据字典: 04-订单业务表.md

### 3.5 众筹管理模块

#### 功能描述
管理众筹项目和众筹车辆，支持项目车辆1对N关联、批量项目管理、自定义分润比例、份额交易管理。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 项目管理 | 众筹项目管理 | 项目创建、审核、上线、管理 | P0 |
| 车辆关联 | 项目车辆关联 | 一个项目关联多辆众筹车辆 | P0 |
| 分润管理 | 分润比例配置 | 自定义分润比例、动态调整 | P0 |
| 份额管理 | 份额交易管理 | 份额购买、转让、赎回 | P1 |
| 项目监控 | 项目数据监控 | 项目进度、收益、风险监控 | P2 |

#### 主要业务流程
- 众筹项目流程：项目创建 → 尽职调查 → 审核批准 → 上线募资 → 车辆采购 → 运营管理

#### 数据需求
- **crowdfunding_projects** (众筹项目表) - 数据字典: 05-众筹管理表.md
- **crowdfunding_shares** (众筹份额表) - 数据字典: 05-众筹管理表.md
- **crowdfunding_vehicles** (众筹车辆表) - 数据字典: 05-众筹管理表.md

### 3.6 合作管理模块

#### 功能描述
管理合作商户、合作车辆和供应商，支持第三方车辆接入、服务标准配置、结算管理等功能。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 合作商管理 | 合作商档案 | 合作商信息审核、资质管理 | P0 |
| 合作车辆管理 | 第三方车辆 | 合作车辆接入、服务标准配置 | P0 |
| 供应商管理 | 供应商管理 | 维保、保险、服务供应商管理 | P1 |
| 结算管理 | 差价结算 | 差价收益计算、结算管理 | P1 |

#### 数据需求
- **cooperative_merchants** (合作商表) - 需要创建
- **cooperative_vehicles** (合作车辆表) - 需要创建
- **suppliers** (供应商表) - 需要创建

### 3.7 营地管理模块

#### 功能描述
管理营地信息、营地设置、预订管理和咨询配置，为房车用户提供营地配套服务。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 营地信息管理 | 营地档案 | 营地基础信息、设施配置 | P1 |
| 营地设置 | 服务配置 | 营地服务标准、价格配置 | P1 |
| 预订管理 | 营地预订 | 营地预订、取消、结算 | P2 |
| 咨询管理 | 咨询处理 | 营地咨询回复、问题处理 | P2 |

#### 数据需求
- **campsites** (营地表) - 需要创建
- **campsite_reservations** (营地预订表) - 需要创建

---

## 4. 营销运营管理功能

### 4.1 营销管理模块

#### 功能描述
管理价格策略、优惠券、营销活动、特惠套餐、房车旅游和增值费用，支持灵活的营销策略配置。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 价格管理 | 价格策略 | 动态价格、季节价格、促销价格 | P0 |
| 优惠券管理 | 优惠券系统 | 优惠券创建、发放、核销 | P1 |
| 活动管理 | 营销活动 | 营销活动策划、执行、效果分析 | P1 |
| 套餐管理 | 特惠套餐 | 套餐组合、价格配置、促销 | P2 |

#### 数据需求
- **pricing_rules** (价格规则表) - 数据字典: 06-营销活动表.md
- **coupons** (优惠券表) - 数据字典: 06-营销活动表.md
- **promotion_activities** (促销活动表) - 数据字典: 06-营销活动表.md

### 4.2 社区管理模块

#### 功能描述
管理社区内容、内容审核、举报处理和社区配置，为用户提供社交互动平台。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 内容管理 | 内容审核 | 用户发布内容审核、管理 | P1 |
| 社区配置 | 社区设置 | 社区规则、版块管理 | P1 |
| 举报处理 | 举报管理 | 用户举报处理、违规处理 | P2 |

#### 数据需求
- **community_posts** (社区帖子表) - 数据字典: 07-内容管理表.md
- **community_reports** (举报记录表) - 数据字典: 07-内容管理表.md

### 4.3 客服管理模块

#### 功能描述
支持三轨制客服路由，工单管理、质量监控和知识库管理，确保服务质量。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 客服配置 | 客服路由 | 智能路由分配、技能分组 | P1 |
| 工单管理 | 工单系统 | 工单创建、分配、处理、关闭 | P1 |
| 质量监控 | 服务质量 | 响应时间、解决率监控 | P2 |
| 知识库管理 | 知识库 | 常见问题、标准答案管理 | P2 |

#### 数据需求
- **customer_service_records** (客服记录表) - 数据字典: 07-内容管理表.md
- **service_tickets** (工单表) - 需要创建

### 4.4 分润管理模块

#### 功能描述
统一管理所有分润类型，包括众筹分润、差价分润、员工激励分润、推广分润。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 分润计算 | 多模式分润 | 自动计算各类分润 | P0 |
| 分润配置 | 分润规则 | 分润比例、规则配置 | P0 |
| 结算管理 | 自动结算 | 分润结算、提现管理 | P1 |
| 提现审核 | 提现流程 | 提现申请、审核、打款 | P1 |

#### 数据需求
- **profit_distributions** (分润记录表) - 数据字典: 09-财务结算表.md
- **withdrawal_requests** (提现申请表) - 需要创建

---

## 5. 系统管理功能

### 5.1 员工管理模块

#### 功能描述
管理管理端员工信息，包括员工档案、角色分配、绩效考核等。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 员工档案 | 员工信息管理 | 员工基础信息、入职离职管理 | P0 |
| 角色分配 | 员工角色 | 员工角色分配、权限配置 | P0 |
| 绩效管理 | 员工考核 | 工作绩效、服务质量考核 | P2 |

#### 数据需求
- **employees** (员工表) - 数据字典: 01-用户相关表.md
- **employee_performance** (员工绩效表) - 需要创建

### 5.2 权限管理模块

#### 功能描述
管理角色权限、菜单权限、数据权限和操作审计日志。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 角色管理 | 角色权限配置 | 角色创建、权限分配 | P0 |
| 菜单权限 | 菜单访问控制 | 基于角色的菜单显示控制 | P0 |
| 数据权限 | 数据访问控制 | 基于角色的数据范围控制 | P1 |
| 操作日志 | 审计日志 | 操作行为记录和查询 | P1 |

#### 数据需求
- **roles** (角色表) - 数据字典: 02-权限管理表.md
- **admin_permissions** (管理权限表) - 数据字典: 02-权限管理表.md
- **operation_logs** (操作日志表) - 数据字典: 10-日志审计表.md

### 5.3 系统管理模块

#### 功能描述
负责系统配置、参数设置、智能预警、系统监控等系统级管理功能。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 系统配置 | 基础配置 | 系统基础参数、业务规则配置 | P1 |
| 智能预警 | 预警系统 | 业务异常、系统异常预警 | P2 |
| 系统监控 | 监控面板 | 系统性能、业务数据监控 | P2 |
| 数据备份 | 备份管理 | 数据备份、恢复管理 | P2 |

#### 数据需求
- **system_configs** (系统配置表) - 数据字典: 08-系统配置表.md

---

## 6. 数据分析功能

### 6.1 工作台模块

#### 功能描述
提供数据概览、今日待办和快捷操作的统一工作台。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 数据概览 | 实时数据 | 关键业务指标实时展示 | P1 |
| 待办事项 | 今日待办 | 待处理任务、预警信息 | P1 |
| 快捷操作 | 常用功能 | 常用功能快速入口 | P2 |

### 6.2 财务管理模块

#### 功能描述
提供收入统计、支出管理、对账结算、财务报表和发票管理功能。

#### 核心功能列表
| 功能类别 | 功能名称 | 功能描述 | 优先级 |
|---------|---------|---------|--------|
| 收入统计 | 收入分析 | 各业务线收入统计分析 | P1 |
| 支出管理 | 成本管理 | 运营成本、支出项目管理 | P1 |
| 财务报表 | 报表生成 | 利润表、现金流量表等 | P2 |
| 发票管理 | 开票管理 | 发票开具、管理、统计 | P2 |

#### 数据需求
- **financial_records** (财务记录表) - 数据字典: 09-财务结算表.md
- **business_metrics** (业务指标表) - 数据字典: 08-系统配置表.md

---

## 7. 集成需求

### 7.1 内部模块依赖

- **用户管理模块**: 被所有业务模块依赖，提供用户信息审核
- **车辆管理模块**: 被订单、众筹模块依赖，提供车辆信息和状态
- **订单管理模块**: 依赖用户、车辆、门店模块，产生财务数据
- **财务管理模块**: 依赖订单、众筹模块，提供财务数据给分析模块

### 7.2 外部接口需求

**支付服务接口**:
- 支付创建: POST /api/payments/create
- 支付查询: POST /api/payments/query
- 退款处理: POST /api/refunds/process

**短信服务接口**:
- 短信发送: POST /api/sms/send
- 验证码验证: POST /api/sms/verify

**第三方服务接口**:
- 风控服务: POST /api/risk/check
- 身份验证: POST /api/identity/verify

### 7.3 小程序端数据同步

- **车辆信息同步**: 车辆状态、价格、可用性实时同步
- **订单状态同步**: 订单状态、进度实时推送
- **用户信息同步**: 用户权限、信用等级同步

---

## 8. 验收场景

### 8.1 正常场景

**业务操作场景**:
- 各角色用户正常登录和权限验证
- 车辆上架、下架、状态变更正常操作
- 订单创建、确认、完成全流程正常处理
- 众筹项目创建、募资、运营正常管理

**数据处理场景**:
- 财务数据自动计算和分润结算准确
- 数据分析报表按时生成和展示
- 系统配置修改生效和应用正常

### 8.2 异常场景

**异常处理场景**:
- 订单异常（取消、退款、纠纷）正常处理
- 车辆异常（故障、维修）状态及时更新
- 用户异常（风险用户）权限及时限制

**系统异常场景**:
- 网络异常时数据不丢失
- 系统异常时自动恢复和数据一致性
- 高并发时系统稳定运行

### 8.3 性能要求

**响应时间要求**:
- 页面加载时间 < 3秒
- API接口响应时间 < 2秒
- 数据查询响应时间 < 5秒
- 批量操作处理时间 < 30秒

**并发性能要求**:
- 支持100个管理员同时在线
- 支持1000个并发API请求
- 支持10000个订单/天处理量

**数据准确性要求**:
- 财务计算准确率 100%
- 数据同步延迟 < 1秒
- 数据一致性 100%

---

## 9. 模块开发优先级

### Phase 0: UI框架架构 (P0 - 基础框架)
1. **UI框架架构设计** - 菜单结构、页面布局、权限控制框架

### Phase 1: 核心基础模块 (P0)
2. **用户认证模块** - 系统基础，所有模块依赖
3. **权限管理模块** - 系统基础，权限控制核心
4. **用户管理模块** - 业务基础，提供用户数据审核
5. **车辆管理模块** - 核心业务，主要资产

### Phase 2: 业务支撑模块 (P0-P1)
6. **门店管理模块** - 运营基础，支撑业务
7. **订单管理模块** - 核心流程，主要收入
8. **众筹管理模块** - 创新业务，重要收入
9. **营销管理模块** - 商业策略，收入优化

### Phase 3: 运营优化模块 (P1-P2)
10. **合作管理模块** - 业务扩展，车辆资源
11. **分润管理模块** - 商业必需，资金管理
12. **客服管理模块** - 服务提升，用户体验
13. **员工管理模块** - 人力资源管理
14. **系统管理模块** - 系统支撑，安全保障
15. **数据分析模块** - 决策支持，运营优化
16. **社区管理模块** - 用户生态，平台价值
17. **营地管理模块** - 配套服务，用户体验

---
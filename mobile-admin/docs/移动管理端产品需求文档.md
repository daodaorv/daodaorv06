# 叨叨房车移动管理端功能需求文档

**文档版本**: v2.0.0 | **创建时间**: 2025-11-26 | **最后更新**: 2025-12-26 | **维护者**: 叨叨房车技术团队

**文档类型**: 移动管理端功能需求文档
**适用对象**: 产品经理、开发人员、测试人员、运维人员

---

## 📋 文档说明

本文档专注于移动管理端的核心业务功能需求，面向现场管理人员和管理员，提供便捷的移动端管理工具。

- ✅ 现场业务管理功能
- ✅ 实时数据监控功能
- ✅ 快捷操作处理功能
- ✅ 移动端适配优化

### ⚠️ 重要：前端独立开发模式

**本项目采用前端独立开发，后端逐一对接的开发模式**

#### 开发阶段说明

**阶段一：前端独立开发（当前阶段）**
- ✅ 使用 Mock 数据完成所有页面和功能
- ✅ 不依赖后端服务，不启动 backend 项目
- ✅ 专注于 UI/UX 实现和前端交互逻辑
- ✅ 在 `docs/移动管理端API.md` 中记录所有 API 需求和状态

**阶段二：后端对接（未来）**
- 🔄 前端开发完成后，再启动后端服务
- 🔄 逐个接口进行联调测试
- 🔄 切换 Mock 数据为真实 API 调用

#### 开发规范

**必须遵守：**
1. 📖 开发前阅读本文档和 `移动管理端技术栈文档.md`
2. 📝 每完成一个功能模块，更新 `移动管理端实施计划.md`
3. 📊 在 `移动管理端API.md` 中记录 API 状态：
   - 🔴 未开发
   - 🟡 已开发（使用Mock）
   - 🟠 待后端开发
   - 🔵 待联调
   - 🟢 联调完成

**禁止操作：**
- ❌ 不要启动后端服务
- ❌ 不要修改 manifest.json 的后端地址配置
- ❌ 不要等待后端 API 开发
- ❌ 不要直接调用未开发的后端接口

**uni-app 开发注意：**
- 📱 使用 HBuilderX 打开项目
- 🔧 运行到浏览器或手机模拟器进行调试
- 📦 Mock 数据放在 `api/mock/` 目录下
- 🎨 遵循 uni-app 组件规范和生命周期
- 📐 适配移动端屏幕尺寸和触摸交互

---

## 📋 目录

1. [产品概述](#1-产品概述)
2. [页面结构与信息架构](#2-页面结构与信息架构)
3. [核心功能需求](#3-核心功能需求)
4. [业务流程需求](#4-业务流程需求)
5. [交互体验需求](#5-交互体验需求)
6. [业务规则要求](#6-业务规则要求)
7. [验收标准](#7-验收标准)

---

## 1. 产品概述

### 1.1 产品定位

叨叨房车移动管理端是专为**门店现场人员**设计的移动办公工具，聚焦于**必须在现场完成**的业务操作，是PC管理端的移动场景补充。

**核心场景**：
- 🚗 **门店车辆交付**：取车/还车现场操作（拍照、签名、核验）
- 📸 **托管车辆核验**：自有车/购车/众筹车辆现场实车核验
- 💬 **客户现场响应**：即时咨询处理、问题快速解决
- 🚚 **车辆调度转运**：司机执行调度任务、实时位置上报

**设计原则**：
- **移动优先**：针对移动设备特性优化（拍照、扫码、定位、签名、OCR识别）
- **场景聚焦**：只做现场必需的功能，复杂管理配置在PC端完成
- **快速响应**：简化流程，提高现场处理效率，减少等待时间
- **离线支持**：关键功能支持离线操作，网络恢复后自动同步

### 1.2 核心目标

- **提高现场效率**: 支持现场快速处理订单和车辆管理
- **实时数据同步**: 确保移动端与后端数据实时同步
- **简化操作流程**: 适配移动端特性，简化复杂操作
- **权限安全控制**: 确保移动端操作的安全性和可控性

### 1.3 目标用户

| 用户角色 | 使用场景 | 核心需求 |
|----------|----------|----------|
| **门店经理** | 门店现场管理 | 快速处理订单、车辆状态更新 |
| **门店员工** | 外勤服务人员 | 现场车辆检查、客户服务 |
| **客服人员** | 客户服务支持 | 查看订单信息、处理客户问题 |
| **调度人员** | 车辆调度管理 | 实时查看车辆状态、调度车辆 |
| **清洁工** | 车辆清洁服务 | 接收清洁任务、上传清洁照片 |
| **服务商** | 维修保养服务 | 接收维修任务、上传维修记录 |
| **合作方** | 合作业务管理 | 查看分配订单、管理收益 |

---

## 2. 页面结构与信息架构

### 2.1 底部导航设计

移动管理端底部导航采用**四个Tab结构**（符合移动端最佳实践）：

| Tab图标 | Tab名称 | 功能定位 | 包含的核心功能 |
|---------|---------|----------|----------------|
| 🏠 | **工作台** | 数据概览与任务管理 | 数据概览、待办任务、快捷操作、今日提醒 |
| 📋 | **业务** | 订单与车辆管理 | 订单管理、车辆管理（顶部Tab切换） |
| 💰 | **托管** | 托管车辆核心业务 | 托管审核、众筹管理、车辆核验、收益查看 |
| 👤 | **我的** | 个人中心与消息 | 个人信息、消息通知、系统设置、帮助中心 |

**设计理由**：
- 4个Tab符合移动端最佳实践（不超过5个）
- **托管业务**是核心移动场景，独立Tab提升效率
- 订单和车辆合并为"业务"Tab，通过顶部切换
- 消息通知移到"我的"页面，减少Tab数量

### 2.2 页面层级架构

**四级页面结构设计**：

```
Level 1: 底部导航层 (Tabbar)
├── 工作台 (Dashboard)
├── 订单 (Orders)
├── 车辆 (Vehicles)
├── 消息 (Messages)
└── 我的 (Profile)

Level 2: 列表与状态层
├── 待办任务列表
├── 订单状态列表
├── 车辆状态列表
├── 工单消息列表
└── 个人设置列表

Level 3: 详情与操作层
├── 任务详情页面
├── 订单详情页面
├── 车辆详情页面
├── 工单详情页面
└── 设置详情页面

Level 4: 表单与上传层
├── 任务完成表单
├── 订单处理表单
├── 车辆检查表单
├── 照片上传界面
└── 签名确认界面
```

### 2.3 移动端特性设计

**现场操作优化**:
- 大按钮设计，便于单手操作
- 清晰的操作流程指引
- 离线数据缓存，支持无网操作
- 语音输入支持，减少手动输入
- 照片拍照集成，现场资料采集

**数据同步策略**:
- 实时同步关键数据（订单状态、紧急消息）
- 延迟同步统计数据（报表、分析）
- 离线存储本地操作数据
- 网络恢复后自动同步

---

## 3. 核心功能需求

### 3.1 工作台模块

**核心功能**：
- **数据概览**: 实时业务数据展示（今日订单、活跃用户、收入统计）
- **待办任务**: 任务管理、任务提醒、任务跟踪
- **快捷操作**: 常用功能快速入口
- **今日提醒**: 今日重要事项、预约提醒

**移动端特性**：
- 大按钮设计，适合触摸操作
- 重要数据突出显示
- 快速滑动切换功能模块
- 下拉刷新数据

### 3.2 订单管理模块

**核心功能**：
- **订单处理**: 订单列表、详情查看、状态更新
- **状态跟踪**: 订单状态实时跟踪、变更提醒
- **异常处理**: 订单异常处理、问题上报
- **客户联系**: 客户信息查看、联系记录
- **现场核验**: 现场拍照、资料上传、确认记录

**移动端优化**：
- 订单卡片式展示，信息层次清晰
- 快速状态切换按钮
- 滑动操作支持（左滑显示操作菜单）
- 离线订单状态缓存

### 3.3 异常订单处理模块（新增）

**核心功能**：
- **车辆故障处理**: 订单进行中发生的车辆故障处理
- **交通事故处理**: 订单进行中发生的交通事故处理
- **异常订单状态管理**: 异常处理中、待解决、已解决
- **与整备流程的关系**: 异常处理完成后，车辆进入整备流程

#### 3.3.1 车辆故障处理

**核心功能**：
- **故障申报**: 客户或员工申报车辆故障
- **订单挂起**: 订单自动进入"挂起"状态，记录挂起时间点
- **道路救援**: 联系道路救援服务
- **现场评估**: 评估故障严重程度和维修方案
- **维修处理**: 安排故障车辆维修
- **费用计算**: 计算停运损失、维修费、车辆折旧损失等
- **责任划分**: 确定费用承担方（用户付费、平台减免、混合方式）
- **处理结果选择**:
  - 方案1：更换车辆（订单继续）
  - 方案2：终止订单并退款补偿（订单完成）
  - 方案3：其它补偿（延长租期、费用减免等，订单继续）
- **订单状态恢复**: 根据处理结果，订单继续或完成
- **故障车辆整备**: 故障车辆维修后进入整备流程

**移动端特性**：
- 📸 现场拍照记录故障情况
- 📍 GPS定位故障地点
- 📞 一键联系道路救援
- ⏱️ 自动记录挂起时间段
- 💰 费用计算器（停运损失+维修费+折旧损失）
- 📶 离线支持，网络恢复后同步

**业务规则**：
- 故障申报后订单立即进入"挂起"状态
- 挂起期间租金暂停计算（不计入订单费用）
- 道路救援响应时间不超过30分钟
- 挂起期间费用按当日车辆价格计算
- 挂起期间费用不参与推广或分润计算
- 处理结果需客户确认
- 故障处理全程记录

#### 3.3.2 交通事故处理

**核心功能**：
- **事故申报**: 客户或员工申报交通事故
- **订单挂起**: 订单自动进入"挂起"状态，记录挂起时间点
- **报保险**: 24小时内报保险公司
- **现场拍照取证**: 拍摄事故现场照片（不少于10张）
- **定损评估**: 保险公司进行定损评估
- **维修处理**: 安排事故车辆维修
- **费用计算**: 计算停运损失、维修费、车辆折旧损失等
- **责任划分**: 确定费用承担方（用户付费、平台减免、保险理赔、混合方式）
- **保险理赔**: 跟踪保险理赔进度
- **处理结果选择**:
  - 方案1：更换车辆（订单继续）
  - 方案2：终止订单并退款补偿（订单完成）
  - 方案3：其它补偿（延长租期、费用减免等，订单继续）
- **订单状态恢复**: 根据处理结果，订单继续或完成
- **事故车辆整备**: 事故车辆维修后进入整备流程

**移动端特性**：
- 📸 事故现场全方位拍照
- 📍 GPS定位事故地点
- 📞 一键报警/报保险
- 📝 事故详情记录
- ⏱️ 自动记录挂起时间段
- 💰 费用计算器（停运损失+维修费+折旧损失）
- 📶 离线支持，网络恢复后同步

**业务规则**：
- 事故申报后订单立即进入"挂起"状态
- 挂起期间租金暂停计算（不计入订单费用）
- 事故必须在24小时内报保险
- 事故照片不少于10张（全景+特写）
- 挂起期间费用按当日车辆价格计算
- 挂起期间费用不参与推广或分润计算
- 保险理赔全程跟踪
- 处理结果需客户确认
- 事故记录永久保存

### 3.4 车辆管理模块

**核心功能**：
- **车辆状态**: 车辆位置、状态、使用情况查看
- **维保管理**: 维保计划、维保记录、维保提醒
- **调度管理**: 车辆调度协调、任务分配
- **清洁管理**: 清洁任务、清洁记录、质量检查
- **检查记录**: 车辆检查表、检查记录、问题上报

**移动端特性**：
- 车辆照片快速上传
- GPS位置定位集成
- 扫码识别车辆信息
- 语音备注功能

### 3.5 消息通知模块

**核心功能**：
- **客服沟通**: 在线沟通、语音通话、视频通话
- **工单管理**: 工单创建、分配、处理、关闭
- **系统通知**: 系统消息、订单提醒、任务提醒
- **紧急提醒**: 危急通知、异常情况通知

**移动端特性**：
- 本地推送通知
- 消息声音和振动提醒
- 离线消息缓存
- 消息优先级显示

### 3.6 个人中心模块

**核心功能**：
- **个人信息**: 头像、姓名、职位、联系方式管理
- **系统设置**: 通知设置、权限设置、数据同步
- **数据同步**: 数据同步状态、同步配置、离线数据
- **帮助中心**: 使用指南、常见问题、联系支持

**移动端适配**：
- 个人信息分页展示
- 快捷拨号功能
- 用户头像缓存优化
- 敏感信息自动脱敏

### 3.7 用户注册与认证模块（新增）

#### 3.7.1 多角色注册功能

**核心功能**：
- **角色选择**: 用户注册时选择身份类型
  - 平台员工（门店经理、门店员工、客服人员、调度人员）
  - 清洁工
  - 服务商（维修、保养、保险等）
  - 合作方（车辆合作、业务合作）
- **基础信息填写**:
  - 姓名、手机号、身份证号
  - 所属区域/门店（员工必填）
  - 服务类型（服务商必填）
  - 合作类型（合作方必填）
- **资质证明上传**:
  - 身份证正反面照片
  - 相关资质证书（服务商、合作方）
  - 营业执照（企业服务商、合作方）
- **注册申请提交**: 提交后等待PC端审核

**移动端特性**：
- 📸 证件拍照上传，支持OCR识别
- 📍 GPS定位自动填充所属区域
- ✍️ 电子签名确认服务协议
- 📶 离线支持，网络恢复后自动提交

**业务规则**：
- 手机号唯一性验证
- 身份证号唯一性验证
- 资质证明必须清晰完整
- 注册申请需PC端审核通过后才能登录

#### 3.7.2 跨端登录支持

**核心功能**：
- **统一账号体系**: 注册账号可在三端登录
  - 小程序端（查看订单、收益）
  - 移动管理端（执行任务、现场操作）
  - PC管理端（数据管理、报表查看）
- **权限动态分配**: 根据审核通过的身份分配权限
- **菜单动态显示**: 根据权限显示可见菜单
- **数据权限控制**: 非平台员工只能查看分配给自己的数据

**权限规则**：
- **平台员工**: 全功能访问（根据职位细分权限）
- **清洁工**: 仅可见清洁任务、上传清洁照片、查看收益
- **服务商**: 仅可见维修任务、上传维修记录、查看收益
- **合作方**: 仅可见分配订单、车辆管理、查看收益

### 3.8 车辆整备管理模块（新增）

#### 3.8.1 整备流程概述

**核心功能**：
- **整备触发**: 订单完成还车后，车辆自动进入"待整备"状态
- **整备类型选择**: 根据车辆状况选择整备类型
  - 车辆维修（常规维修、保养）
  - 事故维修及保险处理
  - 车辆清洁
- **整备任务分配**: 分配给员工、清洁工或服务商
- **整备进度跟踪**: 实时查看整备状态和预计完成时间
- **整备完成确认**: 上传整备后照片，更新车辆状态为"可用"

**移动端特性**：
- 📸 整备前后对比照片
- 📍 GPS定位整备地点
- ⏰ 整备时间自动记录
- 📶 离线支持，网络恢复后同步

#### 3.8.2 轻微维修整备

**核心功能**：
- **维修内容填写**: 详细描述维修项目和问题（仅限轻微问题）
- **维修范围**:
  - 小划痕修复
  - 内饰小修补
  - 功能小故障修复
  - **不包括**：重大故障、事故损坏（应在订单进行中作为异常订单处理）
- **预计时间设置**: 设置预计完成时间
- **维修服务商选择**:
  - 选择已注册的服务商
  - 或手动填写外部服务商信息
- **送车方案选择**:
  - 车辆在门店（无需送车）
  - 平台取送（安排司机）
  - 服务商上门
- **维修照片上传**: 维修前、维修后照片
- **维修费用记录**: 记录维修费用和支付方式

**业务规则**：
- 仅限还车时发现的轻微问题
- 维修内容必须详细描述
- 预计时间不能超过3天
- 维修照片不少于4张
- 维修费用需要财务审核
- **重要说明**：重大故障/事故应在订单进行中作为异常订单处理，不在整备流程中处理

#### 3.8.3 定期保养整备

**核心功能**：
- **保养触发条件**:
  - 根据里程数触发（如每5000公里）
  - 根据时间触发（如每3个月）
  - 系统自动提醒保养
- **保养项目**:
  - 机油更换
  - 机油滤芯更换
  - 空气滤芯更换
  - 刹车片检查/更换
  - 轮胎检查/更换
  - 其他常规保养项目
- **保养服务商选择**:
  - 选择已注册的服务商
  - 或手动填写外部服务商信息
- **保养照片上传**: 保养前、保养后照片
- **保养费用记录**: 记录保养费用和支付方式
- **保养记录管理**: 完整的保养历史记录

**业务规则**：
- 保养计划自动生成并提醒
- 保养内容必须详细记录
- 保养照片不少于4张
- 保养费用需要财务审核
- 保养记录永久保存

#### 3.8.4 车辆清洁整备

**核心功能**：
- **清洁方式选择**:
  - 门店清洁（门店员工执行）
  - 发布任务（分配给清洁工或服务商）
- **任务分配**:
  - 选择清洁人员（员工、清洁工、服务商）
  - 设置预计完成时间
  - 设置清洁标准（标准清洁、深度清洁）
- **送车方案选择**:
  - 车辆在门店（无需送车）
  - 客户自送到指定地点
  - 平台取送
- **清洁照片上传**: 清洁前、清洁后照片对比
- **清洁质量检查**: 检查清洁质量，不合格需重新清洁

**业务规则**：
- 清洁必须在还车后24小时内完成
- 清洁照片不少于8张（外观4张、内饰4张）
- 清洁质量不合格需重新清洁
- 清洁费用根据清洁标准计算

#### 3.8.5 整备完成确认

**核心功能**：
- **整备前车辆检查**: 在整备开始前进行全面检查
- **整备结果确认**: 确认整备项目全部完成
- **整备照片上传**: 上传整备后车辆照片
- **车辆状态更新**: 更新车辆状态为"可用"
- **整备报告生成**: 自动生成整备报告
- **费用结算**: 记录整备费用，提交财务审核

**车辆检查项目**：
- 外观检查（车身、漆面、玻璃）
- 内饰检查（座椅、仪表盘、设备）
- 功能检查（灯光、空调、音响、导航）
- 轮胎检查（胎压、磨损）
- 油液检查（机油、冷却液、刹车油）

**业务规则**：
- 整备前必须完成车辆检查
- 整备照片必须清晰完整
- 车辆状态更新需要二次确认
- 整备报告自动发送给相关人员
- 费用结算需要财务审核通过

### 3.9 托管车辆管理模块（核心移动场景）

#### 3.9.1 自有车托管现场核验

**核心功能**：
- **申请信息查看**: 查看车主提交的托管申请和线上照片
- **现场实车拍照**:
  - 车辆外观（前、后、左、右、顶部）
  - 车辆内饰（驾驶舱、乘客区、储物区）
  - 车辆细节（仪表盘、轮胎、发动机舱）
  - 车辆瑕疵（划痕、凹陷、破损特写）
- **证件核验**:
  - 行驶证原件拍照
  - OCR自动识别信息或手工录入
  - 人工核对车辆信息（车牌、VIN码、车主姓名）
- **车辆状况评估**:
  - 车龄和里程核对
  - 外观状况评分（优/良/中/差）
  - 内饰状况评分
  - 功能检查（灯光、空调、音响、导航）
  - 记录存在的问题和瑕疵
- **托管资格判定**:
  - 自动判定：车龄≤2年、无重大事故、手续齐全
  - 人工判定：车辆状况是否符合托管标准
  - 填写核验意见
- **核验报告生成**:
  - 自动生成核验报告（照片+评估+意见）
  - 上传到系统供PC端审核
  - 通知车主核验结果

**移动端特性**：
- 📸 现场拍照，实时上传
- 🔍 OCR识别，自动填充
- 📍 GPS定位，记录核验地点
- ✍️ 电子签名，车主确认
- 📶 离线支持，网络恢复后同步

**业务规则**：
- 核验必须在车辆所在地完成
- 照片必须清晰完整，不少于15张
- 核验报告必须当场生成
- 车主必须在场并签字确认

#### 3.6.2 购车托管车辆验收

**核心功能**：
- **新车交付验收**: 核对车辆配置和订单信息
- **车辆检查**: 外观、内饰、功能全面检查
- **随车手续检查**: 合格证、保险单、说明书
- **车辆拍照建档**: 全方位拍照（不少于12张）
- **车辆信息录入**: 扫描VIN码自动识别，录入基础信息
- **验收报告生成**: 自动生成验收报告并上传

**移动端特性**：
- 📸 现场拍照建档
- 🔍 VIN码扫描识别
- 📍 GPS定位验收地点
- ✍️ 电子签名确认

#### 3.6.3 众筹托管车辆管理

**核心功能**：
- **众筹车辆验收**: 众筹车辆交付现场验收
- **车辆运营监控**: 查看车辆状态、出租情况、收益数据
- **车辆维护记录**: 现场记录维保信息、拍照、上传单据

**移动端特性**：
- 📸 现场拍照验收
- 📊 实时数据查看
- 📍 GPS定位记录

#### 3.6.4 车主自用审核

**核心功能**：
- 查看自用申请详情
- 检查车辆当前状态和位置
- 核对取还车时间和门店
- 计算服务费和异地还车费
- 审核通过/拒绝

---

## 4. 业务流程需求

### 4.1 订单处理流程

**现场订单处理**：
1. **接收订单通知**: 移动端推送新订单提醒
2. **查看订单详情**: 快速查看订单关键信息
3. **确认订单状态**: 更新订单为"已确认"或"已取消"
4. **安排车辆**: 分配可用车辆给订单
5. **记录操作**: 记录处理时间和操作人员
6. **通知用户**: 向用户发送订单状态更新通知

**关键规则**：
- 订单状态更新需要实时同步到后端
- 重要操作需要二次确认
- 异常订单需要标记并上报
- 操作记录需要保存审计日志

### 4.2 车辆管理流程

**车辆状态管理**：
1. **查看车辆列表**: 按状态和门店筛选车辆
2. **更新车辆状态**: 可用、租用中、维护中、禁用
3. **记录维护信息**: 维护原因、预计完成时间
4. **上传车辆照片**: 车辆状况照片和证件照片
5. **设置车辆位置**: 更新车辆实际位置信息

**关键规则**：
- 车辆状态变更需要记录操作日志
- 维护状态需要设置预计完成时间
- 车辆照片需要压缩和格式验证
- 位置信息需要权限验证

### 4.3 现场核验流程

**标准化现场核验**：
1. **选择核验模板**: 根据业务类型选择检查模板
2. **按项检查**: 按照检查项目逐项核实
3. **拍照记录**: 对关键环节拍照存证
4. **填写表单**: 结构化表单填写核验结果
5. **电子签名**: 相关人员签名确认
6. **资料上传**: 所有核验资料上传至系统

**关键规则**：
- 检查项目必须全部完成才能提交
- 照片需要包含时间戳和地理位置
- 电子签名需要身份验证
- 资料上传需要网络质量检查

### 4.4 取车流程（Pick-up Process）

**标准化取车流程**：
1. **订单确认**: 扫描订单二维码或输入订单号，核对客户信息
2. **证件验证**: 拍照上传驾驶证、身份证，系统自动OCR识别
3. **车辆检查**: 按照检查清单逐项检查车辆状态
   - 外观检查（车身划痕、凹陷、漆面）
   - 内饰检查（座椅、仪表盘、设备完整性）
   - 功能检查（灯光、空调、音响、导航）
   - 油量检查（记录当前油量）
   - 里程检查（记录当前里程数）
4. **拍照存证**: 车辆全方位拍照记录
   - 车辆外观（前、后、左、右四个角度）
   - 车辆内饰（驾驶舱、乘客区、储物区）
   - 仪表盘（显示油量和里程）
   - 特殊部位（已有划痕、损坏等）
5. **合同签署**: 客户阅读并电子签名确认租赁协议
6. **押金确认**: 确认押金支付状态（已支付/待支付）
7. **钥匙交接**: 记录钥匙交接时间和交接人员
8. **使用说明**: 向客户说明车辆使用注意事项
9. **完成取车**: 更新订单状态为"进行中"，发送取车成功通知

**关键规则**：
- 证件必须清晰可识别，系统自动OCR识别并验证
- 车辆照片必须包含时间戳和GPS位置信息
- 押金未支付不允许完成取车流程
- 所有检查项必须完成才能提交
- 客户签名必须真实有效
- 取车完成后自动发送短信/推送通知给客户

**异常处理**：
- 证件不清晰：提示重新拍照
- 车辆状态异常：标记问题并上报，暂停取车
- 押金未到账：联系财务确认或要求客户重新支付
- 客户信息不符：核实身份，必要时拒绝取车

### 4.5 还车流程（Return Process）

**标准化还车流程**：
1. **车辆接收**: 扫描订单二维码或输入订单号，确认还车信息
2. **车辆检查**: 对比取车时照片，全面检查车辆状态
   - 外观检查（对比取车照片，查找新增损坏）
   - 内饰检查（清洁度、设备完整性）
   - 功能检查（所有功能是否正常）
   - 油量检查（对比取车时油量）
   - 里程检查（记录还车里程数）
3. **拍照记录**: 还车时车辆状态全方位拍照
   - 车辆外观（前、后、左、右四个角度）
   - 车辆内饰（驾驶舱、乘客区、储物区）
   - 仪表盘（显示油量和里程）
   - 新增损坏部位（特写拍照）
4. **损坏评估**: 如发现新增损坏，记录详细信息
   - 损坏类型（划痕、凹陷、破损等）
   - 损坏位置（精确描述）
   - 损坏程度（轻微、中度、严重）
   - 预估维修费用
5. **里程核对**: 计算实际行驶里程，判断是否超出套餐
6. **油量检查**: 检查油量是否符合要求，计算补油费用
7. **费用结算**: 计算总费用并向客户展示
   - 基础租金（已支付）
   - 超时费用（如有）
   - 超里程费用（如有）
   - 补油费用（如有）
   - 损坏赔偿费用（如有）
   - 其他费用（如有）
8. **客户确认**: 客户确认费用明细并签字
9. **押金处理**: 根据费用结算结果处理押金
   - 无额外费用：全额退还押金
   - 有额外费用：从押金中扣除，退还余额
   - 费用超过押金：客户补交差额
10. **钥匙回收**: 确认钥匙完整回收（主钥匙、备用钥匙）
11. **完成还车**: 更新订单状态为"已完成，待整备"，发送还车成功通知
12. **进入整备流程**: 车辆自动进入待整备状态，等待整备任务分配

**关键规则**：
- 还车照片必须与取车照片对比展示
- 车辆损坏需要详细记录并拍照存证
- 费用结算需要客户确认签字
- 押金退还需要财务审核（超过一定金额）
- 所有检查项必须完成才能提交
- 钥匙必须完整回收才能完成还车
- 还车完成后自动发送短信/推送通知给客户

**异常处理**：
- 车辆轻微损坏：从押金扣除维修费用，正常完成还车，进入轻微维修整备
- 车辆严重损坏：触发异常订单处理，订单终止，进入事故处理流程
- 客户拒绝赔偿：记录情况，上报管理层处理
- 钥匙丢失：按规定收取钥匙赔偿费用
- 车辆未清洁：收取清洁费用或要求客户清洁后再还车
- 超时严重：计算超时费用，必要时联系客户说明

### 4.6 车辆整备流程（新增）

**标准化整备流程**：
1. **接收整备任务**: 还车完成后，系统自动创建整备任务
2. **车辆检查**: 全面检查车辆状态，记录车辆状况
3. **评估整备需求**: 查看还车检查记录，评估整备需求
4. **选择整备类型**: 根据车辆状况选择整备类型
   - 必选：车辆清洁（标准清洁或深度清洁）
   - 可选：轻微维修（仅限还车时发现的轻微问题）
   - 可选：定期保养（根据里程或时间触发）
5. **填写整备信息**: 根据整备类型填写详细信息
6. **分配整备任务**: 选择执行人员（员工、清洁工、服务商）
7. **执行整备**: 执行人员完成整备并上传照片
8. **质量检查**: 检查整备质量，不合格需重新整备
9. **完成确认**: 确认整备完成，更新车辆状态为"可用"
10. **费用结算**: 记录整备费用，提交财务审核

**关键规则**：
- 整备任务必须在还车后24小时内分配
- 车辆检查必须在整备开始前完成
- 清洁整备必须在24小时内完成
- 轻微维修预计时间不超过3天
- 定期保养根据保养计划执行
- 整备照片必须清晰完整
- 整备完成后自动通知相关人员
- 车辆状态更新需要二次确认
- **重要说明**：重大故障/事故应在订单进行中作为异常订单处理，不在整备流程中处理

**异常处理**：
- 整备超时：自动提醒并上报管理层
- 整备质量不合格：要求重新整备
- 费用超预算：需要管理层审批
- 服务商无响应：更换服务商或自行处理

### 4.6 托管车辆审核流程

**自有车托管审核流程**：
1. **接收申请**: 系统推送新的自有车托管申请通知
2. **查看申请详情**: 查看车辆信息、车主信息、上传照片
3. **核验行驶证**: 检查行驶证信息的真实性和有效性
4. **查看车辆照片**: 浏览至少12张车辆照片（外观、内饰、细节）
   - 外观照片：车辆前、后、左、右四个角度
   - 内饰照片：驾驶舱、乘客区、储物区
   - 细节照片：仪表盘、轮胎、发动机舱等
5. **评估车辆状况**: 根据照片评估车辆年限、里程、外观状况
6. **检查托管资格**:
   - 车龄是否≤8年
   - 是否有重大事故记录
   - 手续是否齐全
7. **填写审核意见**: 记录审核结果和具体意见
8. **审核决策**: 选择通过或拒绝
   - 通过：系统自动通知车主，提醒线下签署协议
   - 拒绝：填写拒绝原因，系统通知车主
9. **后续跟进**: 审核通过后，跟进线下签约和车辆交付

**购车托管审核流程**：
1. **接收申请**: 系统推送新的购车托管申请通知
2. **查看申请详情**: 查看申请人信息、选择车型、分期方案
3. **核验身份信息**: 检查身份证、联系方式的真实性
4. **评估资质条件**:
   - 年龄是否≥22周岁
   - 信用记录是否良好
   - 收入证明是否充足
5. **审核分期能力**: 根据收入和分期期数评估还款能力
6. **填写审核意见**: 记录审核结果和具体意见
7. **审核决策**: 选择通过或拒绝
   - 通过：系统通知申请人，启动购车流程
   - 拒绝：填写拒绝原因，系统通知申请人
8. **购车跟进**: 审核通过后，协助申请人完成购车和托管手续

**关键规则**：
- 自有车托管审核必须在1-3个工作日内完成
- 购车托管审核必须在3-5个工作日内完成
- 审核意见必须详细记录，便于后续追溯
- 重要决策需要上级审批（如大额托管）
- 审核结果自动通知申请人
- 审核记录永久保存

**异常处理**：
- 照片不清晰：要求车主重新上传
- 信息不完整：联系车主补充资料
- 资质不符：拒绝申请并说明原因
- 疑似欺诈：标记风险并上报

### 4.7 车主自用审核流程

**车主自用审核流程**：
1. **接收申请**: 系统推送车主自用申请通知
2. **查看申请详情**: 查看车辆信息、取还车时间、门店选择
3. **检查车辆状态**:
   - 车辆当前状态（是否可用）
   - 车辆当前位置（是否在指定门店）
   - 车辆维保状态（是否需要维保）
4. **检查时间冲突**:
   - 是否与现有订单冲突
   - 是否与维保计划冲突
   - 取还车时间是否合理
5. **计算费用**:
   - 服务费：200-500元/次
   - 异地还车费：根据距离计算（可享受1次/月减免）
   - 附加服务费：根据选择的附加服务计算
6. **填写审核意见**: 记录审核结果和费用明细
7. **审核决策**: 选择通过或拒绝
   - 通过：系统通知车主，预留车辆
   - 拒绝：填写拒绝原因，系统通知车主
8. **车辆预留**: 审核通过后，系统自动预留车辆，避免冲突

**关键规则**：
- 审核必须在1个工作日内完成
- 车辆状态必须为"可用"才能通过
- 时间冲突必须拒绝申请
- 费用计算必须准确透明
- 审核通过后车辆自动预留

**异常处理**：
- 车辆不可用：拒绝申请，建议其他时间
- 时间冲突：拒绝申请，提供可用时间段
- 车辆维保中：拒绝申请，告知预计完成时间
- 费用争议：联系车主沟通协商

---

## 5. 交互体验需求

### 5.1 移动端界面适配

**屏幕适配**：
- 支持主流手机屏幕尺寸（375px - 414px宽度）
- 响应式布局设计
- 横竖屏切换支持
- 深色模式适配

**交互优化**：
- 大按钮设计（最小44px点击区域）
- 手势操作支持（滑动、长按）
- 快捷键操作
- 语音输入支持

### 5.2 性能优化需求

**加载优化**：
- 首屏加载时间 < 3秒
- 图片懒加载和压缩
- 数据分页加载
- 本地缓存策略

**网络优化**：
- 离线数据访问
- 网络状态检测
- 请求失败重试机制
- 数据压缩传输

### 5.3 用户体验需求

**操作便捷**：
- 常用功能一键直达
- 扫码快速识别
- 语音操作支持
- 历史操作记录

**反馈机制**：
- 操作结果即时反馈
- 加载状态提示
- 错误信息友好显示
- 操作确认对话框

---

## 6. 业务规则要求

### 6.1 用户角色与权限

**角色定义**：

| 角色 | 权限等级 | 描述 |
|------|----------|------|
| **超级管理员** | L5 | 拥有所有功能权限 |
| **区域经理** | L4 | 管理指定区域的所有业务 |
| **门店经理** | L3 | 管理指定门店的业务 |
| **现场管理员** | L2 | 处理现场具体业务操作 |
| **客服人员** | L1 | 查看和处理客户相关信息 |
| **清洁工** | L0 | 仅可见清洁任务和收益 |
| **服务商** | L0 | 仅可见维修任务和收益 |
| **合作方** | L0 | 仅可见分配订单和收益 |

**权限矩阵**：

| 功能模块 | 超级管理员 | 区域经理 | 门店经理 | 现场管理员 | 客服人员 | 清洁工 | 服务商 | 合作方 |
|----------|------------|----------|----------|------------|----------|--------|--------|--------|
| **数据概览** | 查看 | 查看 | 查看 | 查看 | 查看 | 无权 | 无权 | 查看（限定） |
| **用户管理** | 增删改查 | 查看 | 查看 | 查看 | 查看 | 无权 | 无权 | 无权 |
| **订单管理** | 增删改查 | 增删改查 | 增删改查 | 增删改查 | 查看 | 无权 | 无权 | 查看（限定） |
| **车辆管理** | 增删改查 | 查看 | 增删改查 | 增删改查 | 查看 | 无权 | 无权 | 查看（限定） |
| **整备管理** | 增删改查 | 查看 | 增删改查 | 增删改查 | 无权 | 查看（限定） | 查看（限定） | 无权 |
| **财务管理** | 查看 | 查看 | 查看 | 无权 | 无权 | 查看（限定） | 查看（限定） | 查看（限定） |
| **系统设置** | 增删改查 | 无权 | 无权 | 无权 | 无权 | 无权 | 无权 | 无权 |

**数据权限说明**：
- **平台员工（L1-L5）**: 可查看所有数据，操作权限根据等级划分
- **清洁工（L0）**: 仅可见分配给自己的清洁任务、清洁记录、清洁收益
- **服务商（L0）**: 仅可见分配给自己的维修任务、维修记录、维修收益
- **合作方（L0）**: 仅可见分配给自己的订单、车辆信息、合作收益

### 6.2 安全与权限要求

**身份认证**：
- 手机号 + 密码登录
- 生物识别支持（指纹、面容）
- 登录设备管理
- 异常登录检测

**权限控制**：
- 基于角色的功能访问控制
- 数据权限范围控制
- 敏感操作二次验证
- 操作审计日志记录

### 6.3 数据安全要求

**数据传输安全**：
- 敏感数据脱敏显示
- 数据传输加密
- 本地数据加密存储
- 数据访问权限验证

**操作安全**：
- 重要操作二次确认
- 批量操作限制
- 操作频率控制
- 风险操作警告

---

## 7. 验收标准

### 7.1 功能验收

**核心功能**：
- ✅ 用户登录和权限验证正常
- ✅ 工作台数据概览准确显示
- ✅ 订单管理功能完整可用
- ✅ 车辆管理功能完整可用
- ✅ 消息沟通功能正常可用
- ✅ 个人中心管理功能完整

**移动端特性**：
- ✅ 移动端界面适配完善
- ✅ 触摸操作响应准确
- ✅ 离线功能正常可用
- ✅ 推送通知及时准确
- ✅ 现场核验流程顺畅

### 7.2 性能验收

**响应性能**：
- ✅ 首屏加载时间 < 3秒
- ✅ 页面切换流畅无卡顿
- ✅ 数据刷新及时准确
- ✅ 网络异常处理完善

**稳定性**：
- ✅ 连续使用2小时无崩溃
- ✅ 内存使用稳定无泄漏
- ✅ 电池消耗在合理范围
- ✅ 网络断线重连正常

### 7.3 安全验收

**身份认证**：
- ✅ 登录安全机制有效
- ✅ 权限控制准确无误
- ✅ 敏感操作需要验证
- ✅ 操作日志完整记录

**数据安全**：
- ✅ 数据传输加密
- ✅ 本地数据安全存储
- ✅ 敏感信息脱敏显示
- ✅ 数据访问权限验证

### 7.4 用户体验验收

**界面体验**：
- ✅ 界面美观易用
- ✅ 操作流程简单直观
- ✅ 错误提示友好明确
- ✅ 帮助信息完整准确

**功能体验**：
- ✅ 快捷操作便捷高效
- ✅ 数据展示清晰明了
- ✅ 搜索筛选功能完善
- ✅ 批量操作支持良好

---

**文档维护**: 叨叨房车技术团队
**最后更新**: 2025-11-30
**版本**: v1.2.0
**更新内容**: 补充取还车流程（4.4、4.5），移除照片对比功能
**下次审核**: 2025-12-26
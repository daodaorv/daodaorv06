# 移动管理端实施计划

**文档版本**: v1.1.0 | **创建时间**: 2025-12-01 | **最后更新**: 2025-12-01 | **维护者**: 叨叨房车技术团队

---

## 📋 项目概述

### 当前状态分析

**已完成功能** (完成度: 87%):
- ✅ 工作台模块 (100%)
- ✅ 订单列表与详情 (100%)
- ✅ 取车流程页面 (100%) - **新完成**
- ✅ 车辆管理模块 (90%)
- ✅ 消息通知模块 (100%)
- ✅ 个人中心模块 (80%)
- ✅ API Mock 数据层 (100%)

**待完成功能**:
- ⏳ 还车流程页面 (0% - 已完成需求分析和页面设计)
- ⏳ 托管车辆管理模块 (0%)
- ⏳ 登录认证页面 (0%)
- ⏳ 数据统计页面 (0%)

---

## 🎯 开发目标

### 第一阶段：完善核心业务流程 (当前阶段)
**目标**: 完成取还车流程和托管车辆管理
**时间**: 2025-12-01 至 2025-12-03

### 第二阶段：补充辅助功能
**目标**: 完成登录认证、数据统计等辅助功能
**时间**: 2025-12-04 至 2025-12-05

### 第三阶段：优化与测试
**目标**: 全面测试、性能优化、用户体验优化
**时间**: 2025-12-06 至 2025-12-07

---

## 📅 详细实施计划

### Phase 1: 完善取还车流程 (优先级: 🔴 最高)

#### 1.1 取车流程页面 (pages/orders/pickup.vue)
**状态**: ✅ 已完成
**实际工时**: 已完成（前期开发）
**完成时间**: 2025-12-01

**功能清单**:
- [x] 订单信息展示
  - [x] 扫码或输入订单号
  - [x] 显示客户信息
  - [x] 显示车辆信息
  - [x] 显示取车时间和门店

- [x] 证件验证
  - [x] 拍照上传驾驶证
  - [x] 拍照上传身份证
  - [x] OCR 自动识别（Mock）
  - [x] 证件信息展示和确认

- [x] 车辆检查
  - [x] 外观检查清单（前后左右）
  - [x] 内饰检查清单
  - [x] 功能检查清单
  - [x] 油量和里程记录
  - [x] 每项检查拍照存证

- [x] 合同签署
  - [x] 租赁协议展示
  - [x] 电子签名功能
  - [x] 签名确认

- [x] 押金确认
  - [x] 押金支付状态检查
  - [x] 未支付提醒

- [x] 完成取车
  - [x] 钥匙交接记录
  - [x] 更新订单状态
  - [x] 发送取车成功通知

**技术实现**:
- ✅ 使用 uni.chooseImage 实现拍照上传
- ✅ 使用 canvas 实现电子签名
- ✅ 使用 uni.showModal 实现二次确认
- ✅ Mock OCR 识别结果
- ✅ 4步流程进度条设计
- ✅ 完整的表单验证和状态管理

**文件位置**: `pages/orders/pickup.vue` (871行代码)

#### 1.2 还车流程页面 (pages/orders/return.vue)
**状态**: ⏳ 待开发
**预计工时**: 5小时
**当前进度**: 已完成需求分析和页面结构设计

**功能清单**:
- [ ] 车辆接收（步骤1）
  - [ ] 扫码或输入订单号
  - [ ] 显示订单信息
  - [ ] 显示取车时的基础数据（里程、油量）

- [ ] 车辆检查与拍照（步骤2）
  - [ ] 外观检查清单
  - [ ] 内饰检查清单
  - [ ] 功能检查清单
  - [ ] 记录当前里程和油量
  - [ ] 拍照记录（外观、内饰、仪表盘）

- [ ] 损坏评估（步骤3 - 可选）
  - [ ] 新增损坏记录
  - [ ] 损坏类型、位置、程度选择
  - [ ] 损坏照片上传
  - [ ] 预估维修费用

- [ ] 费用结算（步骤4）
  - [ ] 自动计算各项费用
  - [ ] 基础租金展示
  - [ ] 超时费用计算
  - [ ] 超里程费用计算
  - [ ] 补油费用计算
  - [ ] 损坏赔偿费用
  - [ ] 费用明细展示
  - [ ] 押金处理说明

- [ ] 完成还车（步骤5）
  - [ ] 客户签名确认
  - [ ] 钥匙回收确认
  - [ ] 提交还车数据
  - [ ] 更新订单状态
  - [ ] 发送还车成功通知

**技术要点**:
- 5步流程进度条设计
- 费用自动计算逻辑（Mock）
- 电子签名功能复用（参考取车流程）
- 表单数据验证
- 损坏评估可选流程处理

**设计文档**: 已完成页面结构设计（5个步骤流程）
**文件位置**: `pages/orders/return.vue` (待创建)

---

### Phase 2: 托管车辆管理模块 (优先级: 🟡 高)

#### 2.1 托管申请列表页面 (pages/hosting/applications.vue)
**状态**: ⏳ 待开始
**预计工时**: 3小时

**功能清单**:
- [ ] 申请列表展示
  - [ ] 自有车托管申请
  - [ ] 购车托管申请
  - [ ] 车主自用申请
  - [ ] 按状态筛选（待审核、已通过、已拒绝）
  - [ ] 按类型筛选

- [ ] 申请卡片设计
  - [ ] 申请人信息
  - [ ] 车辆信息（自有车）
  - [ ] 申请时间
  - [ ] 审核状态
  - [ ] 快速操作按钮

- [ ] 下拉刷新和上拉加载

**API 需求**:
- `GET /api/v1/hosting/applications` - 获取托管申请列表

#### 2.2 自有车托管审核页面 (pages/hosting/own-car-review.vue)
**状态**: ⏳ 待开始
**预计工时**: 4小时

**功能清单**:
- [ ] 申请详情展示
  - [ ] 车主信息
  - [ ] 车辆信息
  - [ ] 行驶证信息
  - [ ] 车辆照片（至少12张）

- [ ] 照片查看器
  - [ ] 图片缩放
  - [ ] 左右滑动切换
  - [ ] 全屏查看

- [ ] 车辆状况评估
  - [ ] 车龄检查（≤8年）
  - [ ] 事故记录检查
  - [ ] 手续齐全检查
  - [ ] 外观状况评分

- [ ] 审核操作
  - [ ] 填写审核意见（支持语音输入）
  - [ ] 通过/拒绝选择
  - [ ] 二次确认
  - [ ] 提交审核结果

**API 需求**:
- `GET /api/v1/hosting/own-car/:id` - 获取自有车托管详情
- `POST /api/v1/hosting/own-car/:id/review` - 提交审核结果

#### 2.3 购车托管审核页面 (pages/hosting/buy-car-review.vue)
**状态**: ⏳ 待开始
**预计工时**: 4小时

**功能清单**:
- [ ] 申请详情展示
  - [ ] 申请人信息
  - [ ] 身份证信息
  - [ ] 联系方式
  - [ ] 选择车型
  - [ ] 分期方案

- [ ] 资质评估
  - [ ] 年龄检查（≥22周岁）
  - [ ] 信用记录评估
  - [ ] 收入证明审核
  - [ ] 还款能力计算

- [ ] 审核操作
  - [ ] 填写审核意见
  - [ ] 通过/拒绝选择
  - [ ] 二次确认
  - [ ] 提交审核结果

**API 需求**:
- `GET /api/v1/hosting/buy-car/:id` - 获取购车托管详情
- `POST /api/v1/hosting/buy-car/:id/review` - 提交审核结果

#### 2.4 车主自用审核页面 (pages/hosting/self-use-review.vue)
**状态**: ⏳ 待开始
**预计工时**: 3小时

**功能清单**:
- [ ] 申请详情展示
  - [ ] 车主信息
  - [ ] 车辆信息
  - [ ] 取还车时间
  - [ ] 门店选择

- [ ] 状态检查
  - [ ] 车辆当前状态
  - [ ] 车辆当前位置
  - [ ] 维保状态
  - [ ] 时间冲突检查

- [ ] 费用计算
  - [ ] 服务费（200-500元）
  - [ ] 异地还车费
  - [ ] 附加服务费
  - [ ] 费用明细展示

- [ ] 审核操作
  - [ ] 填写审核意见
  - [ ] 通过/拒绝选择
  - [ ] 提交审核结果

**API 需求**:
- `GET /api/v1/hosting/self-use/:id` - 获取车主自用详情
- `POST /api/v1/hosting/self-use/:id/review` - 提交审核结果

#### 2.5 托管车辆列表页面 (pages/hosting/vehicles.vue)
**状态**: ⏳ 待开始
**预计工时**: 2小时

**功能清单**:
- [ ] 托管车辆列表
  - [ ] 车辆信息展示
  - [ ] 托管状态
  - [ ] 收益统计
  - [ ] 按状态筛选

- [ ] 车辆详情跳转

**API 需求**:
- `GET /api/v1/hosting/vehicles` - 获取托管车辆列表

---

### Phase 3: 登录认证模块 (优先级: 🟡 高)

#### 3.1 登录页面 (pages/login/index.vue)
**状态**: ⏳ 待开始
**预计工时**: 3小时

**功能清单**:
- [ ] 登录表单
  - [ ] 手机号输入
  - [ ] 密码输入
  - [ ] 记住密码
  - [ ] 登录按钮

- [ ] 生物识别登录
  - [ ] 指纹识别
  - [ ] 面容识别

- [ ] 登录逻辑
  - [ ] 表单验证
  - [ ] 调用登录 API
  - [ ] Token 存储
  - [ ] 跳转到工作台

**API 需求**:
- `POST /api/v1/auth/login` - 用户登录（已有）

---

### Phase 4: 数据统计模块 (优先级: 🟢 中)

#### 4.1 数据统计页面 (pages/statistics/index.vue)
**状态**: ⏳ 待开始
**预计工时**: 4小时

**功能清单**:
- [ ] 个人工作统计
  - [ ] 今日处理订单数
  - [ ] 本周处理订单数
  - [ ] 本月处理订单数
  - [ ] 图表展示

- [ ] 业绩统计
  - [ ] 个人业绩
  - [ ] 团队业绩
  - [ ] 业绩排名

- [ ] 车辆统计
  - [ ] 车辆使用率
  - [ ] 维保统计
  - [ ] 故障统计

**API 需求**:
- `GET /api/v1/statistics/personal` - 个人统计数据
- `GET /api/v1/statistics/team` - 团队统计数据
- `GET /api/v1/statistics/vehicles` - 车辆统计数据

---

### Phase 5: 优化与完善 (优先级: 🟢 中)

#### 5.1 性能优化
**预计工时**: 2小时

- [ ] 图片懒加载优化
- [ ] 列表虚拟滚动
- [ ] 请求缓存优化
- [ ] 离线数据缓存

#### 5.2 用户体验优化
**预计工时**: 2小时

- [ ] 加载状态优化
- [ ] 错误提示优化
- [ ] 操作反馈优化
- [ ] 动画效果优化

#### 5.3 代码质量优化
**预计工时**: 2小时

- [ ] 代码规范检查
- [ ] 组件抽取复用
- [ ] 工具函数封装
- [ ] 注释完善

---

## 🔧 技术实施要点

### 1. Mock 数据管理
**位置**: `api/mock/`

**已有 Mock 文件**:
- ✅ `auth.js` - 认证相关
- ✅ `dashboard.js` - 工作台相关
- ✅ `order.js` - 订单相关
- ✅ `vehicle.js` - 车辆相关
- ✅ `message.js` - 消息相关

**待创建 Mock 文件**:
- ⏳ `hosting.js` - 托管相关
- ⏳ `statistics.js` - 统计相关

### 2. 通用组件开发
**位置**: `components/common/`

**待开发组件**:
- [ ] `ImageUploader.vue` - 图片上传组件（已有，待完善）
- [ ] `SignaturePad.vue` - 电子签名组件
- [ ] `ImageViewer.vue` - 图片查看器组件
- [ ] `CheckList.vue` - 检查清单组件
- [ ] `FeeCalculator.vue` - 费用计算组件

### 3. 工具函数封装
**位置**: `utils/`

**待开发工具**:
- [ ] `upload.js` - 文件上传工具（已有）
- [ ] `signature.js` - 签名处理工具
- [ ] `ocr.js` - OCR 识别工具（Mock）
- [ ] `fee.js` - 费用计算工具
- [ ] `validator.js` - 表单验证工具

---

## 📊 进度追踪

### 总体进度
- **当前完成度**: 87%
- **目标完成度**: 100%
- **剩余工时**: 约 35 小时
- **本次更新**: 取车流程页面已完成（+2%）

### 模块进度

| 模块 | 完成度 | 状态 | 预计完成时间 | 备注 |
|------|--------|------|--------------|------|
| 工作台模块 | 100% | ✅ 已完成 | - | 数据概览、待办任务、快捷操作 |
| 订单列表与详情 | 100% | ✅ 已完成 | - | 列表、详情、状态管理 |
| 取车流程页面 | 100% | ✅ 已完成 | 2025-12-01 | 4步流程，871行代码 |
| 还车流程页面 | 0% | ⏳ 待开发 | 2025-12-02 | 已完成需求分析和设计 |
| 车辆管理模块 | 90% | ⏳ 进行中 | 2025-12-02 | 列表、详情、维保记录 |
| 消息通知模块 | 100% | ✅ 已完成 | - | 消息列表、详情、已读管理 |
| 个人中心模块 | 80% | ⏳ 进行中 | 2025-12-03 | 个人信息、设置 |
| 托管车辆模块 | 0% | ⏳ 待开始 | 2025-12-03 | 5个页面待开发 |
| 登录认证模块 | 0% | ⏳ 待开始 | 2025-12-04 | 登录页面 |
| 数据统计模块 | 0% | ⏳ 待开始 | 2025-12-05 | 统计图表页面 |

---

## 🎯 下一步行动

### 已完成 (2025-12-01)
1. ✅ 创建实施计划文档
2. ✅ 完整阅读移动管理端产品需求文档
3. ✅ 分析还车流程需求和设计页面结构
4. ✅ 确认取车流程页面已完整开发（871行代码）
5. ✅ 更新实施计划文档进度

### 下一步优先级 (2025-12-02)
**优先级 🔴 最高**:
1. ⏳ 开发还车流程页面 (pages/orders/return.vue)
   - 5个步骤流程
   - 预计工时：5小时
   - 已完成需求分析和页面设计

**优先级 🟡 高**:
2. ⏳ 开发托管车辆管理模块
   - 5个页面待开发
   - 预计工时：16小时

### 本周计划 (2025-12-01 至 2025-12-07)
- ✅ 取车流程页面（已完成）
- ⏳ 还车流程页面（待开发）
- ⏳ 托管车辆管理模块（待开发）
- ⏳ 登录认证模块（待开发）
- ⏳ 数据统计模块（待开发）
- ⏳ 全面测试和优化（待开始）

---

## 📝 开发规范提醒

### 必须遵守
1. 📖 开发前阅读产品需求文档
2. 📝 每完成一个功能模块，更新本文档
3. 📊 在 API 文档中记录 API 状态
4. ✅ 使用 Mock 数据，不依赖后端
5. 🎨 遵循 uni-app 组件规范

### 代码提交规范
```bash
# 格式: <type>(<scope>): <subject> [claude-code]
feat(mobile-admin): 完成取车流程页面开发 [claude-code]
fix(mobile-admin): 修复还车流程费用计算错误 [claude-code]
```

---

**文档维护**: 叨叨房车技术团队
**最后更新**: 2025-12-01 23:30
**版本**: v1.1.0
**更新内容**:
- 更新取车流程页面状态为已完成
- 更新还车流程页面状态和设计文档
- 更新整体完成度为87%
- 更新模块进度表
- 更新下一步行动计划
**下次审核**: 2025-12-08
